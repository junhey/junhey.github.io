<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ç–¯ç‹‚çš„è¿ˆæ­¥</title>
  <icon>https://www.gravatar.com/avatar/4103bc611e70e8ea7e18cb7ff4af8d92</icon>
  <subtitle>ç–¯ç‹‚çš„è¿ˆæ­¥ï¼ˆJunheyï¼‰</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://junhey.com/"/>
  <updated>2023-08-22T04:11:10.879Z</updated>
  <id>http://junhey.com/</id>
  
  <author>
    <name>junhey</name>
    <email>junhey@qq.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ä¸€äº›äº‹â‡§</title>
    <link href="http://junhey.com/2019/09/05/2019-09-05-20.html"/>
    <id>http://junhey.com/2019/09/05/2019-09-05-20.html</id>
    <published>2019-09-05T12:22:10.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘æœ‰å¾ˆæ·±çš„æ„Ÿæ‚Ÿï¼Œå†™å­—ä¹Ÿå†™çš„å¾ˆå°‘ï¼Œåšå®¢ä¹ŸåŸºæœ¬ä¸Šä¸€å¹´æ²¡æœ‰æ›´æ–°äº†ï¼Œè¯´åˆ°åº•å¿™å•Šï¼Œæƒ³æƒ³å¿™åœ¨å“ªï¼Œå¥½åƒä¹Ÿæ²¡æœ‰ä»€ä¹ˆè¾“å‡ºï¼Œæ²¡è¾“å‡ºæ„å‘³ç€è¿™æ®µæ—¶é—´æ”¶è·æ¯”è¾ƒå°‘ï¼Œå°±ç®—æœ‰ä¹Ÿæ˜¯æ€æƒ³ä¸Šçš„æ”¹å˜ï¼Œä½†æ˜¯å¯¹äºæå‡æ¥è¯´è¿˜æ˜¯æœ‰è¾“å‡ºæ¯”è¾ƒå¥½ï¼Œåšå®¢åº”è¯¥è®°å½•ğŸ“ æŠ€æœ¯ï¼Œç”Ÿæ´»ç­‰ç­‰ï¼Œè°¢è°¢å¿ƒå¾—ä½“ä¼šã€‚</p><p>åŠ ç­äº†ï¼Œåé¢ç»§ç»­è¾“å‡ºç³»ç»ŸåŒ–çš„æ–‡æ¡£ï¼Œä»¥å‰çš„åšå®¢ä¸æ›´æ–°ï¼Œä½œä¸ºå­˜æ¡£ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æœ€è¿‘æœ‰å¾ˆæ·±çš„æ„Ÿæ‚Ÿï¼Œå†™å­—ä¹Ÿå†™çš„å¾ˆå°‘ï¼Œåšå®¢ä¹ŸåŸºæœ¬ä¸Šä¸€å¹´æ²¡æœ‰æ›´æ–°äº†ï¼Œè¯´åˆ°åº•å¿™å•Šï¼Œæƒ³æƒ³å¿™åœ¨å“ªï¼Œå¥½åƒä¹Ÿæ²¡æœ‰ä»€ä¹ˆè¾“å‡ºï¼Œæ²¡è¾“å‡ºæ„å‘³ç€è¿™æ®µæ—¶é—´æ”¶è·æ¯”è¾ƒå°‘ï¼Œå°±ç®—æœ‰ä¹Ÿæ˜¯æ€æƒ³ä¸Šçš„æ”¹å˜ï¼Œä½†æ˜¯å¯¹äºæå‡æ¥è¯´è¿˜æ˜¯æœ‰è¾“å‡ºæ¯”è¾ƒå¥½ï¼Œåšå®¢åº”è¯¥è®°å½•ğŸ“ æŠ€æœ¯ï¼Œç”Ÿæ´»ç­‰ç­‰ï¼Œè°¢è°¢å¿ƒå¾—ä½“ä¼šã€‚&lt;/p&gt;
&lt;p&gt;åŠ ç­äº†ï¼Œåé¢ç»§
      
    
    </summary>
    
      <category term="JavaScript" scheme="http://junhey.com/categories/JavaScript/"/>
    
    
      <category term="js" scheme="http://junhey.com/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼-å¤‡å¿˜å½•æ¨¡å¼</title>
    <link href="http://junhey.com/2018/09/26/memento.html"/>
    <id>http://junhey.com/2018/09/26/memento.html</id>
    <published>2018-09-26T14:58:09.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<p>å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMementoï¼‰<br>åœ¨ä¸ç ´åå¯¹è±¡çš„å°è£…æ€§çš„å‰æä¸‹ï¼Œåœ¨å¯¹è±¡ä¹‹å¤–æ•è·å¹¶ä¿å­˜è¯¥å¯¹è±¡å†…éƒ¨çš„çŠ¶æ€ä»¥ä¾¿æ—¥åå¯¹è±¡ä½¿ç”¨æˆ–è€…å¯¹è±¡æ¢å¤åˆ°ä»¥å‰çš„çŠ¶æ€ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬åˆ†é¡µæ•°æ®åˆ‡æ¢æ—¶ï¼Œä¸Šä¸€é¡µä¸‹ä¸€é¡µæ•°æ®åˆ‡æ¢ï¼Œç‚¹å‡»ä¸‹ä¸€é¡µçš„æ—¶å€™ç¼“å­˜å¥½ä¸Šä¸€é¡µå·²ç»åŠ è½½çš„æ•°æ®ã€‚</p><p>egï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Page = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)=</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> cache = &#123;&#125; <span class="comment">//ç¼“å­˜</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">page, fn</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(cache[page])&#123;<span class="comment">// åˆ¤æ–­ç¼“å­˜æ˜¯å¦æœ‰æ•°æ®</span></span><br><span class="line">      <span class="comment">// ä»ç¼“å­˜ä¸­è¯»å–æ•°æ®</span></span><br><span class="line">      showPage(page, cache[page]);</span><br><span class="line">      fn&amp;&amp; fn();</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="comment">// å‘è¯·æ±‚è·å–æ•°æ®</span></span><br><span class="line">      $.<span class="keyword">get</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¤‡å¿˜è€…æ¨¡å¼æœ€ä¸»è¦çš„ä»»åŠ¡æ˜¯å¯¹ç°æœ‰çš„æ•°æ®æˆ–è€…çŠ¶æ€åšç¼“å­˜ï¼Œä¸ºå°†æ¥æŸä¸ªæ—¶åˆ»ä½¿ç”¨æˆ–è€…æ¢å¤åšå‡†å¤‡ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMementoï¼‰&lt;br&gt;åœ¨ä¸ç ´åå¯¹è±¡çš„å°è£…æ€§çš„å‰æä¸‹ï¼Œåœ¨å¯¹è±¡ä¹‹å¤–æ•è·å¹¶ä¿å­˜è¯¥å¯¹è±¡å†…éƒ¨çš„çŠ¶æ€ä»¥ä¾¿æ—¥åå¯¹è±¡ä½¿ç”¨æˆ–è€…å¯¹è±¡æ¢å¤åˆ°ä»¥å‰çš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚æˆ‘ä»¬åˆ†é¡µæ•°æ®åˆ‡æ¢æ—¶ï¼Œä¸Šä¸€é¡µä¸‹ä¸€é¡µæ•°æ®åˆ‡æ¢ï¼Œç‚¹å‡»ä¸‹ä¸€é¡µçš„æ—¶å€™ç¼“å­˜å¥½ä¸Šä¸€é¡µå·²ç»åŠ è½½çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;egï¼š&lt;
      
    
    </summary>
    
      <category term="design-patterns" scheme="http://junhey.com/categories/design-patterns/"/>
    
    
      <category term="design-patterns" scheme="http://junhey.com/tags/design-patterns/"/>
    
  </entry>
  
  <entry>
    <title>ç½®é¡¶æ›´æ–°</title>
    <link href="http://junhey.com/2018/06/13/top.html"/>
    <id>http://junhey.com/2018/06/13/top.html</id>
    <published>2018-06-13T02:18:09.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<h3 id="åšå®¢æ–‡ç« ä¸å®šæœŸæ›´æ–°äºä»¥ä¸‹ç½‘ç«™ï¼š"><a href="#åšå®¢æ–‡ç« ä¸å®šæœŸæ›´æ–°äºä»¥ä¸‹ç½‘ç«™ï¼š" class="headerlink" title="åšå®¢æ–‡ç« ä¸å®šæœŸæ›´æ–°äºä»¥ä¸‹ç½‘ç«™ï¼š"></a>åšå®¢æ–‡ç« ä¸å®šæœŸæ›´æ–°äºä»¥ä¸‹ç½‘ç«™ï¼š</h3><ul><li><p><a href="https://github.com/junhey/studyNotes/issues" target="_blank" rel="noopener">https://github.com/junhey/studyNotes/issues</a></p></li><li><p><a href="https://www.cnblogs.com/junhey" target="_blank" rel="noopener">åšå®¢å›­</a></p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;åšå®¢æ–‡ç« ä¸å®šæœŸæ›´æ–°äºä»¥ä¸‹ç½‘ç«™ï¼š&quot;&gt;&lt;a href=&quot;#åšå®¢æ–‡ç« ä¸å®šæœŸæ›´æ–°äºä»¥ä¸‹ç½‘ç«™ï¼š&quot; class=&quot;headerlink&quot; title=&quot;åšå®¢æ–‡ç« ä¸å®šæœŸæ›´æ–°äºä»¥ä¸‹ç½‘ç«™ï¼š&quot;&gt;&lt;/a&gt;åšå®¢æ–‡ç« ä¸å®šæœŸæ›´æ–°äºä»¥ä¸‹ç½‘ç«™ï¼š&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;
      
    
    </summary>
    
      <category term="javascript" scheme="http://junhey.com/categories/javascript/"/>
    
    
      <category term="html" scheme="http://junhey.com/tags/html/"/>
    
      <category term="css" scheme="http://junhey.com/tags/css/"/>
    
      <category term="javascript" scheme="http://junhey.com/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>Jsç»§æ‰¿çš„å®ç°</title>
    <link href="http://junhey.com/2018/05/27/js-class.html"/>
    <id>http://junhey.com/2018/05/27/js-class.html</id>
    <published>2018-05-27T07:26:50.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<p>è¢«é—®åˆ°es6çš„classç»§æ‰¿æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œæƒ³äº†ä¸€ä¼šä¸çŸ¥é“æ€ä¹ˆå›ç­”å¥½ï¼Œç„¶åæ„Ÿè§‰é‡Œé¢ä¼šæœ‰ä¸€äº›ä¼˜åŒ–ä¹‹ç±»çš„ï¼Œä¾¿æƒ³äº†å†™å†™ä»£ç è¯•è¯•</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>ç»§æ‰¿<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">  /**</span><br><span class="line">   * [ä½¿ç”¨å¯¹è±¡å†’å……å®ç°ç»§æ‰¿ï¼ˆå¤šç»§æ‰¿ï¼‰]</span><br><span class="line">   */</span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params">name</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.name = name</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> iParent = <span class="keyword">new</span> Parent(<span class="string">'james'</span>)</span></span><br><span class="line">  iParent.sayName()</span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params">name</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.parent = Parent</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.parent(name)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">delete</span> <span class="keyword">this</span>.parent</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.saySome = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'my name: '</span> + <span class="keyword">this</span>.name)</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.sayName()</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> iChild = <span class="keyword">new</span> Child(<span class="string">'kobe'</span>)</span></span><br><span class="line">  iChild.saySome()</span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(iChild.constructor)</span></span><br><span class="line"></span><br><span class="line">  /** </span><br><span class="line">   * Call/Applyæ–¹æ³•æ”¹å˜å‡½æ•°ä¸Šä¸‹æ–‡å®ç°ç»§æ‰¿ï¼ˆè¯¥ç§æ–¹å¼ä¸èƒ½ç»§æ‰¿åŸå‹é“¾ï¼Œè‹¥æƒ³ç»§æ‰¿åŸå‹é“¾ï¼Œåˆ™é‡‡ç”¨æ··åˆæ¨¡å¼ï¼‰</span><br><span class="line"><span class="javascript">   * å®ç°åŸç†ï¼šæ”¹å˜å‡½æ•°å†…éƒ¨çš„å‡½æ•°ä¸Šä¸‹æ–‡<span class="keyword">this</span>ï¼Œä½¿å®ƒæŒ‡å‘ä¼ å…¥å‡½æ•°çš„å…·ä½“å¯¹è±¡</span></span><br><span class="line">   */</span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params">firstname</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.fname = firstname;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.age = <span class="number">28</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.age);</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params">firstname</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    Parent.call(<span class="keyword">this</span>, firstname); <span class="comment">// å°†thisä¼ ç»™çˆ¶æ„é€ å‡½æ•°</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">//Parent.apply(this, [firstname]); // ä¸callä½œç”¨ç›¸åŒ</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.saySomeThing = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.fname);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.sayAge();</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> firstname;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> myChild = <span class="keyword">new</span> Child(<span class="string">'Lee'</span>);</span></span><br><span class="line">  myChild.saySomeThing();</span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(myChild.constructor)</span></span><br><span class="line"><span class="javascript">  myChild.constructor == Child; <span class="comment">// true</span></span></span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * åŸå‹é“¾å®ç°ç»§æ‰¿</span><br><span class="line">   * å®ç°åŸç†ï¼šä½¿å­ç±»åŸå‹å¯¹è±¡æŒ‡å‘çˆ¶ç±»çš„å®ä¾‹ä»¥å®ç°ç»§æ‰¿ï¼Œå³é‡å†™ç±»çš„åŸå‹ï¼Œå¼Šç«¯æ˜¯ä¸èƒ½ç›´æ¥å®ç°å¤šç»§æ‰¿</span><br><span class="line">   */</span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.age);</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params">firstname</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.fname = firstname;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.age = <span class="number">28</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.saySomeThing = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.fname);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.sayAge();</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="javascript">  Child.prototype = <span class="keyword">new</span> Parent();</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> myChild = <span class="keyword">new</span> Child(<span class="string">'Lee'</span>);</span></span><br><span class="line"><span class="javascript">  myChild.saySomeThing(); <span class="comment">// Lee 28</span></span></span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * æ··åˆæ¨¡å¼</span><br><span class="line">   */</span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.age);</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="javascript">  Parent.prototype.sayParent = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    alert(<span class="string">'This is parent!'</span>);</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params">firstname</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    Parent.call(<span class="keyword">this</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.fname = firstname;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.age = <span class="number">28</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.saySomeThing = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.fname);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.sayAge();</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="javascript">  Child.prototype = <span class="keyword">new</span> Parent();</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> myChild = <span class="keyword">new</span> Child(<span class="string">'Lee'</span>);</span></span><br><span class="line">  myChild.saySomeThing();</span><br><span class="line">  myChild.sayParent();</span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(myChild.constructor)</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">Parent</span>(<span class="params">hello</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.hello = hello;</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="javascript">  Parent.prototype.sayHello = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    alert(<span class="keyword">this</span>.hello);</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">Child</span>(<span class="params">hello, world</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    Parent.call(<span class="keyword">this</span>, hello); <span class="comment">//å°†çˆ¶ç±»çš„å±æ€§ç»§æ‰¿è¿‡æ¥ </span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.world = world; <span class="comment">//æ–°å¢ä¸€äº›å±æ€§ </span></span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="javascript">  Child.prototype = <span class="keyword">new</span> Parent(); <span class="comment">//å°†çˆ¶ç±»çš„æ–¹æ³•ç»§æ‰¿è¿‡æ¥ </span></span></span><br><span class="line"><span class="javascript">  Child.prototype.sayWorld = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">//æ–°å¢ä¸€äº›æ–¹æ³• </span></span></span><br><span class="line"><span class="javascript">    alert(<span class="keyword">this</span>.world);</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> c = <span class="keyword">new</span> Child(<span class="string">"zhangsan"</span>, <span class="string">"lisi"</span>);</span></span><br><span class="line">  c.sayHello();</span><br><span class="line">  c.sayWorld();</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * es6ç»§æ‰¿</span><br><span class="line">   */</span><br><span class="line"><span class="javascript">  <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">//æ„é€ å‡½æ•°</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">constructor</span>(props) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.name = props.name || <span class="string">'æœªçŸ¥'</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    eat() &#123;</span><br><span class="line"><span class="javascript">      alert(<span class="keyword">this</span>.name + <span class="string">"åœ¨åƒä¸œè¥¿..."</span>);</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="comment">//classç»§æ‰¿</span></span></span><br><span class="line"><span class="javascript">  <span class="class"><span class="keyword">class</span> <span class="title">Bird</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">//æ„é€ å‡½æ•°</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">constructor</span>(props) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">//è°ƒç”¨å®ç°çˆ¶ç±»çš„æ„é€ å‡½æ•°</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">super</span>(props);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.type = props.type || <span class="string">"æœªçŸ¥"</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fly() &#123;</span><br><span class="line"><span class="javascript">      alert(<span class="keyword">this</span>.name + <span class="string">"åœ¨é£..."</span>);</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> myBird = <span class="keyword">new</span> Bird(&#123;</span></span><br><span class="line"><span class="javascript">    name: <span class="string">'é¹¦é¹‰'</span></span></span><br><span class="line">  &#125;)</span><br><span class="line">  myBird.eat()</span><br><span class="line">  myBird.fly()</span><br><span class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç æ˜¯å®ç°jsç»§æ‰¿çš„ä¸€äº›æ–¹æ³•ï¼Œä»…ä¾›å‚è€ƒã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;è¢«é—®åˆ°es6çš„classç»§æ‰¿æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œæƒ³äº†ä¸€ä¼šä¸çŸ¥é“æ€ä¹ˆå›ç­”å¥½ï¼Œç„¶åæ„Ÿè§‰é‡Œé¢ä¼šæœ‰ä¸€äº›ä¼˜åŒ–ä¹‹ç±»çš„ï¼Œä¾¿æƒ³äº†å†™å†™ä»£ç è¯•è¯•&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span c
      
    
    </summary>
    
      <category term="javascript" scheme="http://junhey.com/categories/javascript/"/>
    
    
      <category term="javascript" scheme="http://junhey.com/tags/javascript/"/>
    
      <category term="class" scheme="http://junhey.com/tags/class/"/>
    
  </entry>
  
  <entry>
    <title>javascript event loop</title>
    <link href="http://junhey.com/2018/04/07/Javascript-Event-Loop.html"/>
    <id>http://junhey.com/2018/04/07/Javascript-Event-Loop.html</id>
    <published>2018-04-07T07:06:36.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨Nodejsäº‹ä»¶å¾ªç¯æœºåˆ¶ä¸­ï¼Œæœ‰ä»»åŠ¡ä¸¤ä¸ªé˜Ÿåˆ—</p><ol><li>Macrotaské˜Ÿåˆ—</li><li>Microtaské˜Ÿåˆ—</li></ol><p>åœ¨ä¸€ä¸ªäº‹ä»¶å¾ªç¯é‡Œï¼Œè¿™ä¸¤ä¸ªé˜Ÿåˆ—ä¼šåˆ†ä¸¤æ­¥æ‰§è¡Œï¼Œç¬¬ä¸€æ­¥ä¼šå›ºå®šåœ°æ‰§è¡Œä¸€ä¸ªï¼ˆä¸”ä»…ä¸€ä¸ªï¼‰Macrotaskä»»åŠ¡ï¼Œç¬¬äºŒæ­¥ä¼šæ‰§è¡Œæ•´ä¸ªMicrotaské˜Ÿåˆ—ä¸­çš„æ‰€æœ‰ä»»åŠ¡ã€‚å¹¶ä¸”ï¼Œåœ¨æ‰§è¡ŒMicrotaské˜Ÿåˆ—ä»»åŠ¡çš„æ—¶å€™ï¼Œä¹Ÿå…è®¸åŠ å…¥æ–°çš„Microtaskä»»åŠ¡ï¼Œç›´åˆ°æ‰€æœ‰Microtaskä»»åŠ¡å…¨éƒ¨æ‰§è¡Œå®Œæ¯•ï¼Œæ‰ä¼šç»“æŸå¾ªç¯ã€‚  </p><blockquote><p>ç®€å•ç‚¹è®²å°±æ˜¯ï¼šå…ˆæ‰§è¡ŒMacrotaskä»»åŠ¡, ç„¶åæ£€æŸ¥Microtaské˜Ÿåˆ— , å¦‚æœæœ‰å°±æ‰§è¡ŒMicrotaské˜Ÿåˆ— , å†å›åˆ°Macrotaskä»»åŠ¡ä¸­</p></blockquote><p>ä»»åŠ¡é˜Ÿåˆ—ä¸æ­¢ä¸€ä¸ª, ä¸”å­˜åœ¨ä¼˜å…ˆçº§:<br>process.nextTick &gt; promise.then &gt; setTimeout &gt; setImmediate</p><ul><li><p>macrotasks: script(æ•´ä½“ä»£ç ),setTimeout, setInterval, setImmediate, I/O, UI rendering</p></li><li><p>microtasks: process.nextTick, Promises, Object.observe, MutationObserver</p></li></ul><p>whatwgè§„èŒƒ: </p><ul><li>ä¸€ä¸ªäº‹ä»¶å¾ªç¯(event loop)ä¼šæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªä»»åŠ¡é˜Ÿåˆ—(task queue) </li><li>task queue å°±æ˜¯ macrotask queue </li><li>æ¯ä¸€ä¸ª event loop éƒ½æœ‰ä¸€ä¸ª microtask queue </li><li>task queue == macrotask queue != microtask queue </li><li>ä¸€ä¸ªä»»åŠ¡ task å¯ä»¥æ”¾å…¥ macrotask queue ä¹Ÿå¯ä»¥æ”¾å…¥ microtask queue ä¸­</li></ul><p>åŒ…è£¹åœ¨ä¸€ä¸ª script æ ‡ç­¾ä¸­çš„jsä»£ç ä¹Ÿæ˜¯ä¸€ä¸ª task ç¡®åˆ‡è¯´æ˜¯ macrotask.</p><p>ä¾‹å¦‚ä»ä¸€ä¸ªäº‹ä»¶å¾ªç¯å¼€å§‹ï¼Œåˆ°ç»“æŸä¼šç»å†ä»¥ä¸‹æ­¥éª¤ï¼š </p><ol><li>å¼•æ“ä»macrotask queueä¸­å–å‡ºä¸€ä¸ªä»»åŠ¡æ‰§è¡Œ; </li><li>å°†microtask queueä¸­çš„æ‰€æœ‰ä»»åŠ¡å–å‡ºï¼ŒæŒ‰é¡ºåºå…¨éƒ¨æ‰§è¡Œ; </li><li>é‡å¤1;</li></ol><p>ä½†æ˜¯, requestAnimationFrame callback çš„æ‰§è¡Œæ—¶æœºä¸æµè§ˆå™¨çš„ render ç­–ç•¥æœ‰å…³ï¼Œæ˜¯é»‘ç®±çš„ã€‚</p><p>çœ‹ä¸‹é¢å‡ ä¸ªç¤ºä¾‹<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.info(<span class="number">1</span>))</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.info(<span class="number">2</span>)</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.info(<span class="number">3</span>)</span><br><span class="line">    resolve()</span><br><span class="line">    <span class="built_in">console</span>.info(<span class="number">4</span>)</span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">  <span class="built_in">console</span>.info(<span class="number">5</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="number">6</span>))</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">7</span>)</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Output: 2571346</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.info(<span class="number">1</span>))</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.info(<span class="number">2</span>)</span><br><span class="line">  resolve()</span><br><span class="line">  setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.info(<span class="number">3</span>)</span><br><span class="line">    <span class="built_in">console</span>.info(<span class="number">4</span>)</span><br><span class="line">  &#125;, <span class="number">0</span>)</span><br><span class="line">  <span class="built_in">console</span>.info(<span class="number">5</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="number">6</span>))</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">7</span>)</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Output: 2576134</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">setImmediate(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;,<span class="number">0</span>);</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">    resolve();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">4</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">5</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">6</span>);</span><br><span class="line">process.nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">7</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">8</span>);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Output: 34687521</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"a"</span>);</span><br><span class="line">    <span class="keyword">await</span>  async2(); <span class="comment">//æ‰§è¡Œè¿™ä¸€å¥åï¼Œawaitä¼šè®©å‡ºå½“å‰çº¿ç¨‹ï¼Œå°†åé¢çš„ä»£ç åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç„¶åç»§ç»­æ‰§è¡Œå‡½æ•°åé¢çš„åŒæ­¥ä»£ç </span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"b"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">async2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log( <span class="string">'c'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"d"</span>);</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"e"</span>);</span><br><span class="line">&#125;,<span class="number">0</span>);</span><br><span class="line">async1();</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"f"</span>);</span><br><span class="line">    resolve();</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"g"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'h'</span>);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Output: d a c f h b g e</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure></p><p>å¦‚ä½•é€‰ç”¨Macrotaskæˆ–Microtaskå‘¢ï¼Ÿ<br>å¯ä»¥è¿™æ ·ç®€å•ç†è§£ï¼šå¦‚æœä½ æƒ³è®©ä¸€ä¸ªä»»åŠ¡ç«‹å³æ‰§è¡Œï¼Œé‚£ä¹ˆå°±æŠŠå®ƒè®¾ç½®ä¸ºMicrotaskï¼Œé™¤æ­¤ä¹‹å¤–éƒ½ç”¨Macrotaskæ¯”è¾ƒå¥½ã€‚å› ä¸ºå¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶Nodeæ˜¯å¼‚æ­¥éé˜»å¡çš„ï¼Œä½†åœ¨ä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­ï¼ŒMicrotaskçš„æ‰§è¡Œæ–¹å¼åŸºæœ¬ä¸Šå°±æ˜¯ç”¨åŒæ­¥çš„ã€‚</p><p>å¯èƒ½å­˜åœ¨çš„é—®é¢˜<br>ç›¸ä¿¡è¯»åˆ°è¿™é‡Œä½ å·²ç»æ„è¯†åˆ°ï¼Œå¦‚æœä¸€ä¸ªMicrotaské˜Ÿåˆ—å¤ªé•¿ï¼Œæˆ–è€…æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸æ–­åŠ å…¥æ–°çš„Microtaskä»»åŠ¡ï¼Œä¼šå¯¼è‡´ä¸‹ä¸€ä¸ªMacrotaskä»»åŠ¡å¾ˆä¹…éƒ½æ‰§è¡Œä¸äº†ã€‚ç»“æœå°±æ˜¯ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°UIä¸€ç›´åˆ·æ–°ä¸äº†ï¼Œæˆ–è€…I/Oä»»åŠ¡ä¸€ç›´å®Œæˆä¸äº†ã€‚</p><p>åº”è¯¥æ˜¯è€ƒè™‘åˆ°äº†è¿™ä¸€ç‚¹ï¼Œè‡³å°‘Microtaskä»»åŠ¡ä¸­çš„process.nextTickä»»åŠ¡ï¼Œæ˜¯è¢«è®¾ç½®äº†ï¼ˆåœ¨ä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­çš„ï¼‰æœ€å¤§è°ƒç”¨æ¬¡æ•°çš„ï¼Œå«process.maxTickDepthã€‚é»˜è®¤æ˜¯1000ã€‚ä¸€å®šç¨‹åº¦ä¸Šé¿å…äº†ä¸Šè¿°æƒ…å†µã€‚</p><p>å‚è€ƒæ–‡ç« <br><a href="https://blog.risingstack.com/node-js-at-scale-understanding-node-js-event-loop/" target="_blank" rel="noopener">node-js-at-scale-understanding-node-js-event-loop</a><br><a href="https://www.zcfy.cc/article/node-js-at-scale-understanding-the-node-js-event-loop-risingstack-1652.html" target="_blank" rel="noopener">ç†è§£ Node.js äº‹ä»¶å¾ªç¯</a><br><a href="https://stackoverflow.com/questions/25915634/difference-between-microtask-and-macrotask-within-an-event-loop-context" target="_blank" rel="noopener">difference-between-microtask-and-macrotask-within-an-event-loop-context</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åœ¨Nodejsäº‹ä»¶å¾ªç¯æœºåˆ¶ä¸­ï¼Œæœ‰ä»»åŠ¡ä¸¤ä¸ªé˜Ÿåˆ—&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Macrotaské˜Ÿåˆ—&lt;/li&gt;
&lt;li&gt;Microtaské˜Ÿåˆ—&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åœ¨ä¸€ä¸ªäº‹ä»¶å¾ªç¯é‡Œï¼Œè¿™ä¸¤ä¸ªé˜Ÿåˆ—ä¼šåˆ†ä¸¤æ­¥æ‰§è¡Œï¼Œç¬¬ä¸€æ­¥ä¼šå›ºå®šåœ°æ‰§è¡Œä¸€ä¸ªï¼ˆä¸”ä»…ä¸€ä¸ªï¼‰Macrotaskä»»åŠ¡ï¼Œç¬¬äºŒæ­¥ä¼š
      
    
    </summary>
    
      <category term="javascript" scheme="http://junhey.com/categories/javascript/"/>
    
    
      <category term="javascript" scheme="http://junhey.com/tags/javascript/"/>
    
      <category term="event-loop" scheme="http://junhey.com/tags/event-loop/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptå®šæ—¶å™¨åŸç†</title>
    <link href="http://junhey.com/2017/11/20/javascript-settimeout.html"/>
    <id>http://junhey.com/2017/11/20/javascript-settimeout.html</id>
    <published>2017-11-20T11:02:13.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<p>javascriptå†…æœ‰ä¸¤ä¸ªå®šæ—¶å™¨setTimeout()å’ŒsetInterval()ã€‚</p><ul><li>setTimeout<br>å®šä¹‰ä¸€ä¸ªåœ¨æŒ‡å®šæ—¶é—´åè§¦å‘çš„å‡½æ•°æˆ–è®¡ç®—è¡¨è¾¾å¼ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(&quot;alert(&apos;this is test&apos;)&quot;,2000);</span><br></pre></td></tr></table></figure></li></ul><p>ç”¨æ³•å¯ä»¥å‚è€ƒä¸‹<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/setTimeout" target="_blank" rel="noopener">MDNçš„setTimeoutå®šä¹‰</a></p><p>çœ‹åˆ°åé¢åº”è¯¥æ˜¯è¿™æ ·å®šä¹‰ï¼š<strong>åœ¨æŒ‡å®šæ—¶é—´å†…, å°†ä»»åŠ¡æ”¾å…¥äº‹ä»¶é˜Ÿåˆ—,ç­‰å¾…jså¼•æ“ç©ºé—²åè¢«æ‰§è¡Œ</strong></p><ul><li>setInterval<br>åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”åæ‰§è¡Œç›¸åº”çš„å‡½æ•°ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setInterval(&quot;console.log(&apos;demo&apos;);&quot;,1000);</span><br></pre></td></tr></table></figure></li></ul><p>é¦–å…ˆçœ‹ä¸€é“é¢˜ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alert(<span class="number">1</span>); </span><br><span class="line">setTimeout(<span class="string">"alert(2)"</span>, <span class="number">0</span>); </span><br><span class="line">alert(<span class="number">3</span>);</span><br></pre></td></tr></table></figure></p><p>æ‰§è¡Œç»“æœæ˜¯1 3 2<br>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿç­”ï¼šå› ä¸ºjsçš„å•çº¿ç¨‹ç‰¹æ€§ã€‚<br>é¦–å…ˆJSçº¿ç¨‹alertå†…å®¹ä¸º1ï¼Œç„¶åè¯»å–åˆ°setTimeoutå®šæ—¶å™¨ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šæ‰§è¡Œæµè§ˆå™¨çš„çº¿ç¨‹ï¼Œç„¶åè·³è¿‡å®šæ—¶å™¨ç»§ç»­æ‰§è¡Œï¼Œè¿™ä¸ªæ—¶å€™ä½ å°±çœ‹åˆ°äº†å¼¹å‡ºæ¡†çš„å†…å®¹ä¸º3ï¼Œç„¶åå› ä¸ºå®šæ—¶å™¨çš„æ—¶é—´ä¸º0ï¼Œæ‰€ä»¥ä¸€æ‰§è¡Œå®šæ—¶å™¨çº¿ç¨‹å°±ä¼šå³å¯å°†å¼¹å‡ºæ¡†å†…å®¹ä¸º2å­—æ ·çš„ä»»åŠ¡æ·»åŠ åˆ°ä¸»çº¿ç¨‹ï¼ˆJSå¼•æ“çº¿ç¨‹ï¼‰çš„é˜Ÿåˆ—ä¹‹åï¼Œç­‰å¾…JSå¼•æ“çš„è°ƒç”¨ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬çœ‹åˆ°çš„ç»“æœæ˜¯å…ˆå¼¹å‡º13ï¼Œç„¶åå†å¼¹å‡º2ã€‚</p><p>è¿™é‡Œç»™å‡ºä¸€å¼ å¾ˆé‡è¦çš„å›¾ï¼š<br><img src="https://user-images.githubusercontent.com/8244100/29369261-b35c0e50-8267-11e7-8fce-0afc1e25bb0d.png" alt="image"><br>ç„¶è€ŒsetTimeout(0)åšäº†ä»€ä¹ˆï¼Ÿ<br>å®ƒä¼šå¼€å¯ä¸€ä¸ªå®šæ—¶å™¨çº¿ç¨‹ï¼Œå¹¶ä¸ä¼šå½±å“åç»­çš„ä»£ç æ‰§è¡Œï¼Œè¿™ä¸ªå®šæ—¶å™¨çº¿ç¨‹ä¼šåœ¨äº‹ä»¶é˜Ÿåˆ—åé¢æ·»åŠ ä¸€ä¸ªä»»åŠ¡ï¼Œä¾‹å¦‚ä¸Šé¢å›¾ä¸­çš„t3ã€‚ç­‰åˆ°å‰é¢çš„t1ï¼Œt2æ‰§è¡Œå®Œåå†å»æ‰§è¡Œt3ï¼Œå› æ­¤åœ¨å‰é¢ç¬¬äºŒéƒ¨åˆ†å†…å®¹ä¸­çš„è¾“å‡ºé¡ºåºä¸º1 &gt; 3 &gt; 2ã€‚</p><p>æ€»ç»“(å‚è€ƒæ–‡çŒ®æ‘˜æ¥çš„ï¼Œå†™å¾—å¤ªå¥½äº†ğŸ˜†)ï¼š</p><ol><li>æµè§ˆå™¨çš„å†…æ ¸æ˜¯å¤šçº¿ç¨‹çš„ï¼Œå®ƒä»¬åœ¨å†…æ ¸åˆ¶æ§ä¸‹ç›¸äº’é…åˆä»¥ä¿æŒåŒæ­¥ï¼Œä¸€ä¸ªæµè§ˆå™¨è‡³å°‘å®ç°ä¸‰ä¸ªå¸¸é©»çº¿ç¨‹ï¼šjavascriptå¼•æ“çº¿ç¨‹ï¼ŒGUIæ¸²æŸ“çº¿ç¨‹ï¼Œæµè§ˆå™¨äº‹ä»¶è§¦å‘çº¿ç¨‹ã€‚</li><li>javascriptå¼•æ“æ˜¯åŸºäºäº‹ä»¶é©±åŠ¨å•çº¿ç¨‹æ‰§è¡Œçš„.JSå¼•æ“ä¸€ç›´ç­‰å¾…ç€ä»»åŠ¡é˜Ÿåˆ—ä¸­ä»»åŠ¡çš„åˆ°æ¥ï¼Œç„¶ååŠ ä»¥å¤„ç†ï¼Œæµè§ˆå™¨æ— è®ºä»€ä¹ˆæ—¶å€™éƒ½åªæœ‰ä¸€ä¸ªJSçº¿ç¨‹åœ¨è¿è¡ŒJSç¨‹åºã€‚</li><li>å½“ç•Œé¢éœ€è¦é‡ç»˜ï¼ˆRepaintï¼‰æˆ–ç”±äºæŸç§æ“ä½œå¼•å‘å›æµ(reflow)æ—¶,è¯¥çº¿ç¨‹å°±ä¼šæ‰§è¡Œã€‚ä½†éœ€è¦æ³¨æ„ GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“æ˜¯äº’æ–¥çš„ï¼Œå½“JSå¼•æ“æ‰§è¡Œæ—¶GUIçº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼ŒGUIæ›´æ–°ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ç­‰åˆ°JSå¼•æ“ç©ºé—²æ—¶ç«‹å³è¢«æ‰§è¡Œã€‚</li><li>å½“ä¸€ä¸ªäº‹ä»¶è¢«è§¦å‘æ—¶è¯¥çº¿ç¨‹ä¼šæŠŠäº‹ä»¶æ·»åŠ åˆ°å¾…å¤„ç†é˜Ÿåˆ—çš„é˜Ÿå°¾ï¼Œç­‰å¾…JSå¼•æ“çš„å¤„ç†ã€‚è¿™äº›äº‹ä»¶å¯æ¥è‡ªJavaScriptå¼•æ“å½“å‰æ‰§è¡Œçš„ä»£ç å—å¦‚setTimeOutã€ä¹Ÿå¯æ¥è‡ªæµè§ˆå™¨å†…æ ¸çš„å…¶ä»–çº¿ç¨‹å¦‚é¼ æ ‡ç‚¹å‡»ã€AJAXå¼‚æ­¥è¯·æ±‚ç­‰ï¼Œä½†ç”±äºJSçš„å•çº¿ç¨‹å…³ç³»æ‰€æœ‰è¿™äº›äº‹ä»¶éƒ½å¾—æ’é˜Ÿç­‰å¾…JSå¼•æ“å¤„ç†ã€‚</li></ol><p>å‚è€ƒæ–‡çŒ®ï¼š<br><a href="http://blog.csdn.net/liaodehong/article/details/52212721" target="_blank" rel="noopener">JavaScriptå®šæ—¶å™¨åŸç†åŠé«˜çº§ä½¿ç”¨</a><br><a href="http://www.cnblogs.com/yelongsan/p/6296700.html" target="_blank" rel="noopener">js setTimeOut() by è’‚å…¶ä¹‹æ­»</a><br><a href="https://segmentfault.com/a/1190000003764106" target="_blank" rel="noopener">javascript å®šæ—¶å™¨å·¥ä½œåŸç†</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;javascriptå†…æœ‰ä¸¤ä¸ªå®šæ—¶å™¨setTimeout()å’ŒsetInterval()ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;setTimeout&lt;br&gt;å®šä¹‰ä¸€ä¸ªåœ¨æŒ‡å®šæ—¶é—´åè§¦å‘çš„å‡½æ•°æˆ–è®¡ç®—è¡¨è¾¾å¼ã€‚&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;
      
    
    </summary>
    
      <category term="javascript" scheme="http://junhey.com/categories/javascript/"/>
    
    
      <category term="javascript" scheme="http://junhey.com/tags/javascript/"/>
    
      <category term="settimeout" scheme="http://junhey.com/tags/settimeout/"/>
    
  </entry>
  
  <entry>
    <title>Reactç”Ÿå‘½å‘¨æœŸ</title>
    <link href="http://junhey.com/2017/10/11/react-product-cycle.html"/>
    <id>http://junhey.com/2017/10/11/react-product-cycle.html</id>
    <published>2017-10-11T14:32:10.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>åœ¨æˆ‘ä»¬ç¼–ç¨‹è¿‡ç¨‹ä¸­å¯¹äºReactå­¦ä¹ æœ€é‡è¦çš„å°±æ˜¯ç”Ÿå‘½å‘¨æœŸäº†ï¼Œå­¦ä¹ reactç”Ÿå‘½å‘¨æœŸå¯¹äºè‡ªå·±çš„ç¼–ç¨‹ä¹Ÿä¼šæœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚</p></blockquote><p>å¦‚æœä½ åŸºç¡€å¤Ÿå¥½çš„è¯å»ºè®®ç›´æ¥çœ‹ä»£ç <a href="https://github.com/facebook/react/blob/master/src/renderers/dom/__tests__/ReactDOMProduction-test.js#L89-L175" target="_blank" rel="noopener">https://github.com/facebook/react/blob/master/src/renderers/dom/<strong>tests</strong>/ReactDOMProduction-test.js#L89-L175</a>ï¼Œä»ä»£ç ä¸­å¯ä»¥çœ‹å‡ºReactDOMçš„ç”Ÿæˆè¿‡ç¨‹ï¼Œä¸‹é¢è¯¦è®²Reactçš„ç”Ÿå‘½å‘¨æœŸï¼š</p><ol><li>å®ä¾‹åŒ–</li></ol><ul><li><p>getDefaultProps<br>è°ƒç”¨ React.createClassï¼Œç„¶åè§¦å‘getDefaultProps æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åä¸çˆ¶ç»„ä»¶æŒ‡å®šçš„propså¯¹è±¡åˆå¹¶ï¼Œæœ€åèµ‹å€¼ç»™ this.props ä½œä¸ºè¯¥ç»„ä»¶çš„é»˜è®¤å±æ€§ï¼Œè¯¥æ–¹æ³•åªè°ƒç”¨ä¸€æ¬¡</p></li><li><p>getInitialState<br>åˆå§‹åŒ–state çš„å€¼ï¼Œè¿”å›å€¼ä¼šèµ‹ç»™this.stateï¼Œåœ¨è¿™ä¸ªæ–¹æ³•é‡Œï¼Œä½ å·²ç»å¯ä»¥è®¿é—®åˆ°this.propsã€‚</p></li><li><p>componentWillMount<br>æ“ä½œstateï¼Œä¸ä¼šè§¦å‘å†æ¬¡æ¸²æŸ“ï¼Œå»ºè®®ç”¨constructorä»£æ›¿</p></li><li><p>render<br>æ ¹æ® state çš„å€¼ï¼Œç”Ÿæˆé¡µé¢éœ€è¦çš„è™šæ‹Ÿ DOM ç»“æ„</p></li><li><p>componentDidMount<br>å¯ä»¥è®¾ç½®stateï¼Œä¼šè§¦å‘å†æ¬¡æ¸²æŸ“ï¼Œç»„ä»¶å†…éƒ¨å¯ä»¥é€šè¿‡ ReactDOM.findDOMNode(this)æ¥è·å–å½“å‰ç»„ä»¶çš„èŠ‚ç‚¹æ“ä½œDOM</p></li></ul><ol start="2"><li>å­˜åœ¨æœŸ</li></ol><ul><li><p>componentWillReceiveProps(nextProps)<br>å½“ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„propsæ—¶ä¼šè§¦å‘è¯¥å‡½æ•°ï¼Œé€šå¸¸å¯ä»¥è°ƒç”¨this.setStateæ–¹æ³•æ¥æ¯”è¾ƒthis.propså’ŒnextPropsçš„æ‰§è¡ŒçŠ¶æ€ï¼Œå®Œæˆå¯¹stateçš„ä¿®æ”¹</p></li><li><p>shouldComponentUpdate(nextProps, nextState<br>è¯¥æ–¹æ³•ç”¨æ¥æ‹¦æˆªæ–°çš„propsæˆ–stateï¼Œç„¶ååˆ¤æ–­æ˜¯å¦æ›´æ–°ç»„ä»¶</p></li><li><p>componentWillUpdate(nextProps, nextState)<br>æ›´æ–°ä¹‹å‰è°ƒç”¨</p></li><li><p>rende<br>æ ¹æ®diffç®—æ³•ï¼Œç”Ÿæˆéœ€è¦æ›´æ–°çš„è™šæ‹ŸDOMæ•°æ®</p></li><li><p>componentDidUpdate(prevProps, prevState)<br>renderæ–¹æ³•æˆåŠŸæ‰§è¡Œä¹‹åï¼Œä¼šæ¸²æŸ“å‡ºæ¥çœŸå®çš„DOMï¼Œä½ å¯ä»¥åœ¨è¯¥æ–¹æ³•ä¸­ä½¿ç”¨this.getDOMNode()æ–¹æ³•è®¿é—®åŸç”ŸDOM</p></li></ul><ol start="3"><li>é”€æ¯&amp;æ¸…ç†æœŸ</li></ol><ul><li>componentWillUnmount<br>ä¼šè§¦å‘componentWillUnmountï¼Œé€šå¸¸æ˜¯ç§»é™¤DOMï¼Œå–æ¶ˆäº‹ä»¶ç»‘å®šï¼Œé”€æ¯å®šæ—¶å™¨ç­‰å·¥ä½œ</li></ul><hr><p>å‚è€ƒæ–‡çŒ®ï¼š<br><a href="https://segmentfault.com/a/1190000006917448" target="_blank" rel="noopener">ç†è§£React ç»„ä»¶</a><br><a href="http://www.cnblogs.com/webbest/p/5862436.html" target="_blank" rel="noopener">Reactç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</a><br><a href="http://www.jianshu.com/p/c36a0601b00c" target="_blank" rel="noopener">Reactç”Ÿå‘½å‘¨æœŸè§£æ</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬ç¼–ç¨‹è¿‡ç¨‹ä¸­å¯¹äºReactå­¦ä¹ æœ€é‡è¦çš„å°±æ˜¯ç”Ÿå‘½å‘¨æœŸäº†ï¼Œå­¦ä¹ reactç”Ÿå‘½å‘¨æœŸå¯¹äºè‡ªå·±çš„ç¼–ç¨‹ä¹Ÿä¼šæœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœä½ åŸºç¡€å¤Ÿå¥½çš„è¯å»ºè®®ç›´æ¥çœ‹ä»£ç &lt;a href=&quot;https://github.com/fa
      
    
    </summary>
    
      <category term="javascript" scheme="http://junhey.com/categories/javascript/"/>
    
    
      <category term="javascript" scheme="http://junhey.com/tags/javascript/"/>
    
      <category term="reactjs" scheme="http://junhey.com/tags/reactjs/"/>
    
  </entry>
  
  <entry>
    <title>JSå¯¹è±¡çš„æ·±æµ…å¤åˆ¶</title>
    <link href="http://junhey.com/2017/09/26/javascript-copy.html"/>
    <id>http://junhey.com/2017/09/26/javascript-copy.html</id>
    <published>2017-09-26T13:18:20.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æµ…å¤åˆ¶"><a href="#æµ…å¤åˆ¶" class="headerlink" title="æµ…å¤åˆ¶"></a>æµ…å¤åˆ¶</h2><p>å…³äºjså¯¹è±¡çš„æ·±æµ…å¤åˆ¶ï¼Œå…ˆæ¥ä¸€æ®µä»£ç <br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯¹è±¡æµ…å¤åˆ¶</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">shadowCopy</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> obj !== <span class="string">'object'</span>) <span class="keyword">return</span> ;</span><br><span class="line">    <span class="keyword">var</span> newObj;</span><br><span class="line">    <span class="keyword">if</span>(obj.constructor === <span class="built_in">Array</span>)&#123;</span><br><span class="line">        newObj = [];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        newObj = &#123;&#125;;</span><br><span class="line">        newObj.constructor = obj.constructor;<span class="comment">//ä¿ç•™å¯¹è±¡çš„constructorå±æ€§</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> prop <span class="keyword">in</span> obj)&#123;</span><br><span class="line">        <span class="keyword">if</span>(obj.hasOwnProperty(prop))&#123;</span><br><span class="line">          newObj[prop] = obj[prop];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newObj;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p><p>ä¸Šè¿°ä»£ç å®ç°äº†æµ…å¤åˆ¶ï¼Œå…¶ä¸­è§£å†³äº†<code>ä¸èƒ½æ­£ç¡®å®ç°æ•°ç»„çš„æµ…å¤åˆ¶</code>å’Œ<code>å¤åˆ¶æ“ä½œä¸¢å¤±äº†å¯¹è±¡çš„constructorå±æ€§</code>çš„é—®é¢˜ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯æ·±æµ…å¤åˆ¶å‘¢ï¼Ÿ<br>ä»å±‚æ¬¡ä¸Šå¯¹è±¡çš„å¤åˆ¶åˆ†ä¸ºæµ…å¤åˆ¶å’Œæ·±å¤åˆ¶ï¼Œæµ…å¤åˆ¶æ˜¯æŒ‡åªå¤åˆ¶ä¸€å±‚å¯¹è±¡çš„å±æ€§ï¼Œä¸ä¼šå¤åˆ¶å¯¹è±¡ä¸­çš„å¯¹è±¡çš„å±æ€§ï¼Œå¯¹è±¡çš„æ·±å¤åˆ¶ä¼šå¤åˆ¶å¯¹è±¡ä¸­å±‚å±‚åµŒå¥—çš„å¯¹è±¡çš„å±æ€§ã€‚å¤åˆ¶å¯¹è±¡æ—¶ï¼Œé™¤äº†è¦å¤åˆ¶å¯¹è±¡çš„å±æ€§å¤–ï¼Œè¿˜è¦å…¼é¡¾åˆ°æ˜¯å¦ä¿ç•™äº†å¯¹è±¡çš„constructorå±æ€§ï¼Œæ˜¯å¦å¯¹æ¯ä¸€ç§æ•°æ®ç±»å‹ï¼ˆJavaScriptå¸¸è§çš„æ•°æ®ç±»å‹æœ‰String,Number,Boolean,Data,RegExp,Array,Funtion,Objectï¼‰éƒ½å®ç°æ­£ç¡®çš„å¤åˆ¶ã€‚å®ç°æµ…å¤åˆ¶å¯ä»¥ç”¨Object.assignå‡½æ•°ï¼ŒğŸ‘‡ä¸‹é¢å…·ä½“è®²è®²è¿™ä¸ªå‡½æ•°ã€‚</p><p>Object.assignå‡½æ•°<br>å‡½æ•°å‚æ•°ä¸ºä¸€ä¸ªç›®æ ‡å¯¹è±¡ï¼ˆè¯¥å¯¹è±¡ä½œä¸ºæœ€ç»ˆçš„è¿”å›å€¼ï¼‰æºå¯¹è±¡(æ­¤å¤„å¯ä»¥ä¸ºä»»æ„å¤šä¸ª)ã€‚é€šè¿‡è°ƒç”¨è¯¥å‡½æ•°å¯ä»¥æ‹·è´æ‰€æœ‰å¯è¢«æšä¸¾çš„è‡ªæœ‰å±æ€§å€¼åˆ°ç›®æ ‡å¯¹è±¡ä¸­ã€‚æ‹·è´è¿‡ç¨‹ä¸­å°†è°ƒç”¨æºå¯¹è±¡çš„getteræ–¹æ³•ï¼Œå¹¶åœ¨targetå¯¹è±¡ä¸Šä½¿ç”¨setteræ–¹æ³•å®ç°ç›®æ ‡å¯¹è±¡çš„æ‹·è´ã€‚<br><figure class="highlight plain"><figcaption><span>...sources)```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨è¯¥å‡½æ•°éœ€è¦æ³¨æ„ä¸‰ç‚¹ï¼š1. å¯è¢«æšä¸¾çš„å±æ€§ï¼Œ2. è‡ªæœ‰å±æ€§ï¼Œ3. stringæˆ–è€…Symbolç±»å‹æ˜¯å¯ä»¥è¢«ç›´æ¥åˆ†é…çš„ã€‚</span><br><span class="line"></span><br><span class="line">## æ·±å¤åˆ¶</span><br><span class="line"></span><br><span class="line">é‚£ä¹ˆæ·±å¤åˆ¶å¯èƒ½å°±éœ€è¦å±‚å±‚é€’å½’ï¼Œå¤åˆ¶å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼ŒåŒ…æ‹¬å¯¹è±¡å±æ€§çš„å±æ€§çš„å±æ€§ï¼Œæœ‰äººæƒ³å‡ºäº†ç”¨JSONçš„è§£æå®ç°ï¼Œå¦‚ä¸‹ä»£ç ï¼š</span><br><span class="line">```javascript</span><br><span class="line">function deepCopy(obj)&#123;</span><br><span class="line">   if(typeof obj !== &quot;object&quot;)&#123; return ;&#125;</span><br><span class="line">   var str = JSON.stringify(obj);</span><br><span class="line">   return JSON.parse(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ğŸ‘†ä¸Šé¢çš„æ–¹æ³•ä¸é€‚ç”¨çš„æ¡ä»¶æ˜¯</p><ol><li>éœ€è¦è€ƒè™‘æŠŠå‡½æ•°ï¼Œæ­£åˆ™ç­‰ç‰¹æ®Šæ•°æ®ç±»å‹å¤åˆ¶</li><li>å½“å‰å¯¹è±¡ä¸æ”¯æŒJSON</li><li>JSONå¤åˆ¶ä¼šå¿½ç•¥æ‰å€¼ä¸ºundefinedä»¥åŠå‡½æ•°è¡¨è¾¾å¼<br>å¯ä»¥çœ‹ä¸‹é¢çš„æ —å­ï¼š<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    a: <span class="number">1</span>,</span><br><span class="line">    b: <span class="number">2</span>,</span><br><span class="line">    c: <span class="literal">undefined</span>,</span><br><span class="line">    sum: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> a + b; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> obj2 = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(obj));</span><br><span class="line"><span class="built_in">console</span>.log(obj2);<span class="comment">//è¾“å‡ºï¼šObject &#123;a: 1, b: 2&#125;</span></span><br></pre></td></tr></table></figure></li></ol><p>è¿™ä¸ªæ—¶å€™è¿˜æ˜¯è¦å±‚å±‚é€’å½’æ¥ä¸åŒæƒ…å†µä¸åŒåˆ†ææ¥è€ƒè™‘çš„ï¼Œæœ€ç»ˆçš„æ–¹æ¡ˆå¦‚ä¸‹ï¼š<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯¹è±¡æ·±å¤åˆ¶</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> newObj = obj.constructor === <span class="built_in">Array</span> ? []:&#123;&#125;;</span><br><span class="line">    newObj.constructor = obj.constructor;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> obj !== <span class="string">"object"</span>)&#123; </span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">window</span>.JSON)&#123;</span><br><span class="line">        newObj = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(obj));<span class="comment">//è‹¥éœ€è¦è€ƒè™‘ç‰¹æ®Šçš„æ•°æ®ç±»å‹ï¼Œå¦‚æ­£åˆ™ï¼Œå‡½æ•°ç­‰ï¼Œéœ€æŠŠè¿™ä¸ªelse ifå»æ‰å³å¯</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> prop <span class="keyword">in</span> obj)&#123;</span><br><span class="line">            <span class="keyword">if</span>(obj[prop].constructor === <span class="built_in">RegExp</span> ||obj[prop].constructor === <span class="built_in">Date</span>)&#123;</span><br><span class="line">                newObj[prop] = obj[prop];</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">typeof</span> obj[prop] === <span class="string">'object'</span>)&#123;</span><br><span class="line">                newObj[prop] = deepCopy(obj[prop]);<span class="comment">//é€’å½’</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                newObj[prop] = obj[prop];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="ç¬¬ä¸‰æ–¹åº“å®ç°çš„æ·±æµ…å¤åˆ¶ï¼ˆæ¨èçœ‹æ–‡æ¡£æºç ï¼Œè¿™é‡Œå°±ä¸è¯¦è®²äº†ï¼‰"><a href="#ç¬¬ä¸‰æ–¹åº“å®ç°çš„æ·±æµ…å¤åˆ¶ï¼ˆæ¨èçœ‹æ–‡æ¡£æºç ï¼Œè¿™é‡Œå°±ä¸è¯¦è®²äº†ï¼‰" class="headerlink" title="ç¬¬ä¸‰æ–¹åº“å®ç°çš„æ·±æµ…å¤åˆ¶ï¼ˆæ¨èçœ‹æ–‡æ¡£æºç ï¼Œè¿™é‡Œå°±ä¸è¯¦è®²äº†ï¼‰"></a>ç¬¬ä¸‰æ–¹åº“å®ç°çš„æ·±æµ…å¤åˆ¶ï¼ˆæ¨èçœ‹æ–‡æ¡£æºç ï¼Œè¿™é‡Œå°±ä¸è¯¦è®²äº†ï¼‰</h2><ol><li>jQuery.extend</li></ol><p><a href="http://api.jquery.com/jQuery.extend/" target="_blank" rel="noopener">jQuery.extend()</a></p><ol start="2"><li>lodash ä¸­  _.clone() / _.cloneDeep()</li></ol><p><a href="https://lodash.com/docs#clone" target="_blank" rel="noopener">_.clone()</a><br><a href="https://lodash.com/docs#cloneDeep" target="_blank" rel="noopener">_.cloneDeep()</a></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨æˆ‘ä»¬å¹³æ—¶åº”ç”¨è¿‡ç¨‹ä¸­ï¼Œæµ…å¤åˆ¶ä¼˜å…ˆè€ƒè™‘Object.assignå‡½æ•°ï¼Œæ·±å¤åˆ¶ä¼˜å…ˆè€ƒè™‘lodashä¸­çš„_.cloneDeep()æ–¹æ³•ï¼Œå¦‚æœæ˜¯ç®€å•çš„æ·±å¤åˆ¶å¹¶ç¬¦åˆJSONæ ¼å¼å¯ä»¥è€ƒè™‘JSON.parse(JSON.stringify(obj))ã€‚</p><p>å‚è€ƒï¼š<br><a href="https://zhuanlan.zhihu.com/p/26282765" target="_blank" rel="noopener">js åŸºç¡€æ·±æµ…æ‹·è´</a><br><a href="https://cnodejs.org/topic/56c49662db16d3343df34b13" target="_blank" rel="noopener">ç†è§£Object.assign</a><br><a href="https://segmentfault.com/a/1190000005898146" target="_blank" rel="noopener">jsæ·±æµ…å¤åˆ¶</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;æµ…å¤åˆ¶&quot;&gt;&lt;a href=&quot;#æµ…å¤åˆ¶&quot; class=&quot;headerlink&quot; title=&quot;æµ…å¤åˆ¶&quot;&gt;&lt;/a&gt;æµ…å¤åˆ¶&lt;/h2&gt;&lt;p&gt;å…³äºjså¯¹è±¡çš„æ·±æµ…å¤åˆ¶ï¼Œå…ˆæ¥ä¸€æ®µä»£ç &lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;
      
    
    </summary>
    
      <category term="JavaScript" scheme="http://junhey.com/categories/JavaScript/"/>
    
    
      <category term="javascript" scheme="http://junhey.com/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>å­¦ä¹ è®¾è®¡æ¨¡å¼ä¹‹MVCã€MVPã€MVVM</title>
    <link href="http://junhey.com/2017/08/19/mvc-mvp-mvvm.html"/>
    <id>http://junhey.com/2017/08/19/mvc-mvp-mvvm.html</id>
    <published>2017-08-19T13:26:50.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å¼•è¨€ï¼šè®¤çœŸå­¦ä¹ äº†ä¸‹å¹¿ä¹‰MVCæ¨¡å¼ä¸‹å‰ç«¯æ€ä¹ˆå†™ï¼Œç‹­ä¹‰çš„MVCå…¶å®æ˜¯æœ‰ä¸€ä¸ªå˜åŒ–è¿‡ç¨‹ï¼šMVC MVP MVVMï¼Œç½‘ä¸Šçœ‹äº†å¾ˆå¤šçš„å…³äºè¿™æ–¹é¢çš„ä»‹ç»ï¼Œä»¥å‰æ€»æ˜¯å°†è§†å›¾æ•°æ®é€»è¾‘å†™ä¸€ä¸ªæ¨¡å—ï¼Œæœ€è¿‘å°è¯•åˆ†å¼€å¹¶ç”¨ç»„ä»¶å¼çš„å¼€å‘çš„æ–¹å¼â€¦</p></blockquote><h3 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a><strong>MVC</strong></h3><p>MVCæ˜¯æ¨¡å‹(Model)ï¼è§†å›¾(View)ï¼æ§åˆ¶å™¨(Controller)çš„ç¼©å†™ï¼Œæ˜¯è®¾è®¡æ¨¡å¼ä¸­æœ€å¸¸ç”¨çš„è½¯ä»¶æ¶æ„ã€‚</p><blockquote><p>è§†å›¾ï¼ˆViewï¼‰ï¼šç”¨æˆ·ç•Œé¢ã€‚<br>æ§åˆ¶å™¨ï¼ˆControllerï¼‰ï¼šä¸šåŠ¡é€»è¾‘<br>æ¨¡å‹ï¼ˆModelï¼‰ï¼šæ•°æ®ä¿å­˜</p></blockquote><p>æ‰€æœ‰æ–¹å¼éƒ½æ˜¯å•å‘é€šä¿¡ï¼š</p><ul><li>View æ¥å—ç”¨æˆ·äº¤äº’è¯·æ±‚</li><li>View å°†è¯·æ±‚è½¬äº¤ç»™Controllerå¤„ç†</li><li>Controller æ“ä½œModelè¿›è¡Œæ•°æ®æ›´æ–°ä¿å­˜</li><li>æ•°æ®æ›´æ–°ä¿å­˜ä¹‹åï¼ŒModelä¼šé€šçŸ¥Viewæ›´æ–°</li><li>View æ›´æ–°å˜åŒ–æ•°æ®ä½¿ç”¨æˆ·å¾—åˆ°åé¦ˆ</li></ul><p>MVCç®€åŒ–æ¨¡å‹<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é¡µé¢åŠ è½½ååˆ›å»ºMVCå¯¹è±¡</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºMVCå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">var</span> MVC=MVC||&#123;&#125;ï¼›</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–MVCæ•°æ®æ¨¡å‹å±‚</span></span><br><span class="line">    MVC.model=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;();</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–MVCè§†å›¾å±‚</span></span><br><span class="line">    MVC.view=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;();</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–MVCæ§åˆ¶å™¨å±‚</span></span><br><span class="line">    MVC.controller=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><ol><li><p>MVCæ•°æ®æ¨¡å‹å±‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//MVCæ•°æ®æ¨¡å‹å±‚</span></span><br><span class="line">MVC.model=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="comment">//å†…éƒ¨æ•°æ®å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">var</span> M=&#123;&#125;;</span><br><span class="line">    <span class="comment">//æœåŠ¡å™¨ç«¯è·å–æ•°æ®ï¼Œé€šå¸¸é€šè¿‡Ajaxè·å–å¹¶å­˜å‚¨</span></span><br><span class="line">    M.data=&#123;&#125;;</span><br><span class="line">    <span class="comment">//é…ç½®æ•°æ®</span></span><br><span class="line">    M.config=&#123;&#125;;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">//è·å–æœåŠ¡å™¨ç«¯æ•°æ®</span></span><br><span class="line">    getData:<span class="function"><span class="keyword">function</span>(<span class="params">m</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> M.data[m];</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//è·å–é…ç½®æ•°æ®</span></span><br><span class="line">    getConfig:<span class="function"><span class="keyword">function</span>(<span class="params">c</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//æ ¹æ®æ•°æ®å­—æ®µè·å–æ•°æ®</span></span><br><span class="line">    <span class="keyword">return</span> M.config[c]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//è®¾ç½®æœåŠ¡å™¨æ•°æ®</span></span><br><span class="line">    setData:<span class="function"><span class="keyword">function</span>(<span class="params">m,v</span>)</span>&#123;</span><br><span class="line">    M.data[m]=v;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//è®¾ç½®é…ç½®æ•°æ®</span></span><br><span class="line">    setConfig:<span class="function"><span class="keyword">function</span>(<span class="params">c,v</span>)</span>&#123;</span><br><span class="line">    M.data[c]=v;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;();</span><br></pre></td></tr></table></figure></li><li><p>MVCè§†å›¾å±‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//MVCè§†å›¾å±‚</span></span><br><span class="line">MVC.view=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="comment">//æ¨¡å‹æ•°æ®å±‚å¯¹è±¡æ“ä½œæ–¹æ³•å¼•ç”¨</span></span><br><span class="line"><span class="keyword">var</span> M=MVC.model;</span><br><span class="line"><span class="comment">//å†…éƒ¨è§†å›¾åˆ›å»ºæ–¹æ³•å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> V=&#123;&#125;;</span><br><span class="line"><span class="comment">//è·å–è§†å›¾çš„æ¥å£æ–¹æ³•</span></span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">v</span>)</span>&#123;</span><br><span class="line"><span class="comment">//æ ¹æ®è§†å›¾åè¯è¿”å›è§†å›¾</span></span><br><span class="line">V[v]();</span><br><span class="line">&#125;</span><br><span class="line">&#125;();</span><br></pre></td></tr></table></figure></li><li><p>MVCæ§åˆ¶å™¨å±‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//MVCæ§åˆ¶å™¨å±‚</span></span><br><span class="line">MVC.controller=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="comment">//æ¨¡å‹æ•°æ®å±‚å¯¹è±¡æ“ä½œæ–¹æ³•å¼•ç”¨</span></span><br><span class="line"><span class="keyword">var</span> M=MVC.model;</span><br><span class="line"><span class="comment">//è§†å›¾æ•°æ®å±‚å¯¹è±¡æ“ä½œæ–¹æ³•å¼•ç”¨</span></span><br><span class="line"><span class="keyword">var</span> V=MVC.view;</span><br><span class="line"><span class="comment">//æ§åˆ¶å™¨åˆ›å»ºæ–¹æ³•å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> C=&#123;&#125;;</span><br><span class="line">&#125;();</span><br></pre></td></tr></table></figure></li></ol><h3 id="MVP"><a href="#MVP" class="headerlink" title="MVP"></a><strong>MVP</strong></h3><p>MVPæ˜¯Model-View-Presenterï¼Œå³å°†MVCä¸­çš„æ§åˆ¶å™¨Controlleræ¢æˆäº†Presenterè´Ÿè´£é€»è¾‘çš„å¤„ç†ã€‚</p><blockquote><p>MVCå’ŒMVPçš„åŒºåˆ«æ˜¯ï¼šåœ¨MVPä¸­Viewå¹¶ä¸ç›´æ¥ä½¿ç”¨Modelï¼Œå®ƒä»¬ä¹‹é—´çš„é€šä¿¡æ˜¯é€šè¿‡Presenter (MVCä¸­çš„Controller)æ¥è¿›è¡Œçš„ï¼Œæ‰€æœ‰çš„äº¤äº’éƒ½å‘ç”Ÿåœ¨Presenterå†…éƒ¨ï¼Œè€Œåœ¨MVCä¸­Viewä¼šç›´æ¥ä»Modelä¸­è¯»å–æ•°æ®è€Œä¸æ˜¯é€šè¿‡ Controllerã€‚</p></blockquote><p>å„éƒ¨åˆ†ä¹‹é—´éƒ½æ˜¯åŒå‘é€šä¿¡ï¼š</p><ul><li>View æ¥æ”¶ç”¨æˆ·äº¤äº’è¯·æ±‚</li><li>View å°†è¯·æ±‚è½¬äº¤ç»™ Presenter</li><li>Presenter æ“ä½œModelè¿›è¡Œæ•°æ®æ›´æ–°</li><li>Model é€šçŸ¥Presenteræ•°æ®å‘ç”Ÿå˜åŒ–</li><li>Presenter æ›´æ–°Viewæ•°æ®</li></ul><h3 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a><strong>MVVM</strong></h3><p>MVVMæ˜¯Model-View-ViewModelï¼Œå’ŒMVPçš„åŒºåˆ«åœ¨äºPresenteræ¢æˆäº†ViewModelè´Ÿè´£é€»è¾‘å¤„ç†ã€‚</p><blockquote><p>MVVMçš„ä¼˜ç‚¹æ˜¯ä½è€¦åˆã€å¯é‡ç”¨æ€§ã€ç‹¬ç«‹å¼€å‘ã€‚</p></blockquote><p>åŒå‘ç»‘å®šï¼ˆdata-bindingï¼‰ï¼š</p><ul><li>View æ¥æ”¶ç”¨æˆ·äº¤äº’è¯·æ±‚</li><li>View å°†è¯·æ±‚è½¬äº¤ç»™ViewModel</li><li>ViewModel æ“ä½œModelæ•°æ®æ›´æ–°</li><li>Model æ›´æ–°å®Œæ•°æ®ï¼Œé€šçŸ¥ViewModelæ•°æ®å‘ç”Ÿå˜åŒ–</li><li>ViewModel æ›´æ–°Viewæ•°æ®</li></ul><p>åé¢ä¼šè¯¦ç»†ä»‹ç»MVVMçš„è®¾è®¡æ¨¡å¼æ¶æ„ï¼ŒåŒæ—¶ä¼šæœ‰é’ˆå¯¹äºreactå’Œvueä¹‹ç±»MVVMæ¡†æ¶çš„åŸç†ã€‚</p><p>å‚è€ƒæ–‡ç« ï¼š</p><ol><li><a href="http://www.ruanyifeng.com/blog/2015/02/mvcmvp_mvvm.html" target="_blank" rel="noopener">MVCï¼ŒMVP å’Œ MVVM çš„å›¾ç¤º</a></li><li><a href="http://blog.csdn.net/hudan2714/article/details/50990359" target="_blank" rel="noopener">mvcã€mvpã€mvvmä½¿ç”¨å…³ç³»æ€»ç»“</a></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;å¼•è¨€ï¼šè®¤çœŸå­¦ä¹ äº†ä¸‹å¹¿ä¹‰MVCæ¨¡å¼ä¸‹å‰ç«¯æ€ä¹ˆå†™ï¼Œç‹­ä¹‰çš„MVCå…¶å®æ˜¯æœ‰ä¸€ä¸ªå˜åŒ–è¿‡ç¨‹ï¼šMVC MVP MVVMï¼Œç½‘ä¸Šçœ‹äº†å¾ˆå¤šçš„å…³äºè¿™æ–¹é¢çš„ä»‹ç»ï¼Œä»¥å‰æ€»æ˜¯å°†è§†å›¾æ•°æ®é€»è¾‘å†™ä¸€ä¸ªæ¨¡å—ï¼Œæœ€è¿‘å°è¯•åˆ†å¼€å¹¶ç”¨ç»„ä»¶å¼çš„å¼€å‘çš„æ–¹å¼â€¦&lt;/p&gt;
&lt;/blockquote&gt;
&lt;
      
    
    </summary>
    
      <category term="javascript" scheme="http://junhey.com/categories/javascript/"/>
    
    
      <category term="javascript" scheme="http://junhey.com/tags/javascript/"/>
    
      <category term="function" scheme="http://junhey.com/tags/function/"/>
    
  </entry>
  
  <entry>
    <title>å¾®ä¿¡å°ç¨‹åº-ç§»åŠ¨ç«¯å•†åŸ</title>
    <link href="http://junhey.com/2017/07/06/wxapp-develop-section.html"/>
    <id>http://junhey.com/2017/07/06/wxapp-develop-section.html</id>
    <published>2017-07-06T03:46:09.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¾®ä¿¡å°ç¨‹åº-ç§»åŠ¨ç«¯å•†åŸ"><a href="#å¾®ä¿¡å°ç¨‹åº-ç§»åŠ¨ç«¯å•†åŸ" class="headerlink" title="å¾®ä¿¡å°ç¨‹åº-ç§»åŠ¨ç«¯å•†åŸ"></a>å¾®ä¿¡å°ç¨‹åº-ç§»åŠ¨ç«¯å•†åŸ</h1><hr><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><ul><li>git å¤åˆ¶å’Œæ‹‰å–åˆ†æ”¯</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">git clone ssh://git@gitlab.modernavenue.com:10022/fe/wx-app.git</span><br><span class="line">cd wx-app</span><br><span class="line">git checkout -b canudilo-product</span><br><span class="line">git pull origin canudilo-product</span><br><span class="line">git checkout product</span><br><span class="line">git checkout -b 01men-product</span><br><span class="line">git pull origin 01men-product</span><br><span class="line">git checkout --orphan release</span><br><span class="line">git reset --hard</span><br><span class="line">git pull origin release</span><br><span class="line">git checkout -b canudilo-release</span><br><span class="line">git pull origin canudilo-release</span><br><span class="line">git checkout release</span><br><span class="line">git checkout -b 01men-release</span><br><span class="line">git pull origin 01men-release</span><br></pre></td></tr></table></figure><ul><li>æ·»åŠ  git é’©å­<br>æ–°å»ºæ–‡ä»¶ wx-app/.git/hooks/pre-pushï¼Œæ–‡ä»¶å†…å®¹ä¸º</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">while read local_ref local_sha remote_ref remote_sha</span><br><span class="line">do</span><br><span class="line">    branch=$(git rev-parse --symbolic --abbrev-ref $local_ref)</span><br><span class="line">    if [ &quot;release&quot; == &quot;$branch&quot; ]; then</span><br><span class="line">        git checkout canudilo-release</span><br><span class="line">        git pull -r origin canudilo-release</span><br><span class="line">        git rebase release</span><br><span class="line">        git push -f origin canudilo-release</span><br><span class="line">        git checkout 01men-release</span><br><span class="line">        git pull -r origin 01men-release</span><br><span class="line">        git rebase release</span><br><span class="line">        git push -f origin 01men-release</span><br><span class="line">    fi</span><br><span class="line">    if [ &quot;product&quot; == &quot;$branch&quot; ]; then</span><br><span class="line">        git checkout canudilo-product</span><br><span class="line">        git pull -r origin canudilo-product</span><br><span class="line">        git rebase product</span><br><span class="line">        git push -f origin canudilo-product</span><br><span class="line">        git checkout 01men-product</span><br><span class="line">        git pull -r origin 01men-product</span><br><span class="line">        git rebase product</span><br><span class="line">        git push -f origin 01men-product</span><br><span class="line">    fi</span><br><span class="line">done</span><br><span class="line">exit 0</span><br></pre></td></tr></table></figure><ul><li><p>å®‰è£… npm æ¨¡å—</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd wx-app</span><br><span class="line">npm install</span><br><span class="line">npm install gulp -g</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…å¾®ä¿¡å¼€å‘è€…å·¥å…·</p></li></ul><blockquote><p><a href="https://mp.weixin.qq.com/debug/wxadoc/dev/devtools/download.html" target="_blank" rel="noopener">å¾®ä¿¡å¼€å‘è€…å·¥å…·</a></p></blockquote><blockquote><p><a href="https://mp.weixin.qq.com/debug/wxadoc/dev/index.html" target="_blank" rel="noopener">å¼€å‘æ–‡æ¡£</a></p></blockquote><ul><li>å¯¼å…¥é¡¹ç›®ä»£ç </li></ul><blockquote><p>æ³¨ï¼šéœ€è¦æœ‰å¼€å‘è€…æƒé™ï¼Œâ€™å°ç¨‹åºIDâ€™</p></blockquote><ol><li><p>å¡å¥´AppID(å°ç¨‹åºID) wx31674f508491c876</p></li><li><p>01men AppID(å°ç¨‹åºID) wx6e71dc39094db668</p></li></ol><p>é¡¹ç›®ç›®å½•é€‰æ‹© wx-app\src (distç›®å½•ä¸ºå‘å¸ƒæ—¶ç”¨)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//æµ‹è¯•å¾®ä¿¡å·</span><br><span class="line">modernavenuetest</span><br><span class="line">123456test(åŸå¯†ç 18565538230test)</span><br></pre></td></tr></table></figure><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><ul><li>app.js â€” å¯¹æœ¬é¡µé¢çš„çª—å£è¡¨ç°è¿›è¡Œé…ç½®ã€‚</li><li>app.json â€” å¯¹å¾®ä¿¡å°ç¨‹åºè¿›è¡Œå…¨å±€é…ç½®ï¼Œå†³å®šé¡µé¢æ–‡ä»¶çš„è·¯å¾„ã€çª—å£è¡¨ç°ã€è®¾ç½®ç½‘ç»œè¶…æ—¶æ—¶é—´ã€è®¾ç½®å¤š tab ç­‰ã€‚</li><li><p>app.wxss â€” æ¥å—ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸€é¡¹éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œæ¥æŒ‡å®šå°ç¨‹åºç”±å“ªäº›é¡µé¢ç»„æˆã€‚</p></li><li><p>images â€” å­˜æ”¾é¡¹ç›®å›¾ç‰‡</p></li><li>pages â€” å­˜æ”¾é¡¹ç›®é¡µé¢ç›¸å…³æ–‡ä»¶</li><li>pages/common â€” å­˜æ”¾ç‹¬ç«‹wxssæ ·å¼æ–‡ä»¶å’Œtemplate,å¯importå¼•å…¥</li><li>utils â€” å­˜æ”¾utilsæ–‡ä»¶ï¼Œå¯requireå¼•å…¥  </li><li>configs â€” é…ç½®æ–‡ä»¶ api ç­‰é…ç½®</li><li>components â€” æ¨¡å—ç»„ä»¶ </li></ul><h3 id="å¼€å‘æ­¥éª¤å’Œç»†èŠ‚"><a href="#å¼€å‘æ­¥éª¤å’Œç»†èŠ‚" class="headerlink" title="å¼€å‘æ­¥éª¤å’Œç»†èŠ‚"></a>å¼€å‘æ­¥éª¤å’Œç»†èŠ‚</h3><ul><li>å›¾ç‰‡èµ„æº</li></ul><p>æœ‰å…³å¾®ä¿¡å°ç¨‹åºçš„å‰å°èµ„æºï¼Œå·²æ”¾åœ¨  cache1 ä¸Šçš„<br>    /home/modern/datas/wxapp<br>ç›®å½•ä¸‹ï¼Œä»¥åè¿™ç±»çš„å…¨åœ¨è¿™é‡Œ ( ç›¸å…³çš„ nginx éƒ½å·²æ”¹å¥½ )</p><p>é»˜è®¤å¯¹åº”çš„æµ‹è¯•/æ­£å¼è®¿é—®çš„ url å¦‚ä¸‹ï¼š<br><a href="https://testimage.modernavenue.com/wxapp/01men/activity/home-c1.jpg" target="_blank" rel="noopener">https://testimage.modernavenue.com/wxapp/01men/activity/home-c1.jpg</a><br><a href="http://staticm.modernavenue.com/wxapp/01men/activity/home-c1.jpg" target="_blank" rel="noopener">http://staticm.modernavenue.com/wxapp/01men/activity/home-c1.jpg</a><br>å¦‚æœåç»­äº§å“é‚£æå‡ºæ¥ï¼Œå¾®ä¿¡å°ç¨‹åºçš„è¦ä¿®æ”¹ç›¸å…³æ˜¾ç¤ºèµ„æºå›¾ç‰‡ï¼Œä¸Šä¼ ä¸ä¸‹è½½çš„ç›®å½•å¯¹åº”åœ¨è¿™é‡Œ<br>    /home/modern/datas/wxapp/(å°ç¨‹åºåï¼Œå¦‚ï¼š01menã€canudilo)/â€¦ </p><ul><li>é¡µé¢ç”Ÿå‘½å‘¨æœŸ</li></ul><ol><li>å°ç¨‹åºæ³¨å†Œå®Œæˆåï¼ŒåŠ è½½é¡µé¢ï¼Œè§¦å‘onLoadæ–¹æ³•ã€‚</li><li>é¡µé¢è½½å…¥åè§¦å‘onShowæ–¹æ³•ï¼Œæ˜¾ç¤ºé¡µé¢ã€‚</li><li>é¦–æ¬¡æ˜¾ç¤ºé¡µé¢ï¼Œä¼šè§¦å‘onReadyæ–¹æ³•ï¼Œæ¸²æŸ“é¡µé¢å…ƒç´ å’Œæ ·å¼ï¼Œä¸€ä¸ªé¡µé¢åªä¼šè°ƒç”¨ä¸€æ¬¡ã€‚</li><li>å½“å°ç¨‹åºåå°è¿è¡Œæˆ–è·³è½¬åˆ°å…¶ä»–é¡µé¢æ—¶ï¼Œè§¦å‘onHideæ–¹æ³•ã€‚</li><li>å½“å°ç¨‹åºæœ‰åå°è¿›å…¥åˆ°å‰å°è¿è¡Œæˆ–é‡æ–°è¿›å…¥é¡µé¢æ—¶ï¼Œè§¦å‘onShowæ–¹æ³•ã€‚</li><li>å½“ä½¿ç”¨é‡å®šå‘æ–¹æ³•wx.redirectTo(OBJECT)æˆ–å…³é—­å½“å‰é¡µè¿”å›ä¸Šä¸€é¡µwx.navigateBack()ï¼Œè§¦å‘onUnload</li></ol><p>å¸¸è§„é¡µé¢Aï¼šonLoad()â€“&gt;onShow()â€“&gt;onReady()â€“&gt;onHide()â€“&gt;onUnload()<br>é‡Šä¹‰ï¼š<br>onLoad()ï¼šç›‘å¬é¡µé¢åŠ è½½ï¼Œä¸€ä¸ªé¡µé¢åªä¼šè°ƒç”¨ä¸€æ¬¡<br>onShow()ï¼šç›‘å¬é¡µé¢æ˜¾ç¤ºï¼Œæ¯æ¬¡æ‰“å¼€é¡µé¢éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡<br>onReady()ï¼šç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆï¼Œä¸€ä¸ªé¡µé¢åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œä»£è¡¨é¡µé¢åŠ è½½å®Œæ¯•ï¼Œè§†å›¾å±‚å’Œé€»è¾‘å±‚å¯è¿›è¡Œäº¤äº’<br>onHide()ï¼šç›‘å¬é¡µé¢éšè—ï¼Œå½“é¡µé¢è¢«è¦†ç›–æˆ–è¿›å…¥åå°æ‰§è¡Œ<br>onUnload()ï¼šç›‘å¬é¡µé¢å¸è½½ï¼Œå½“é¡µé¢è¢«å…³é—­æˆ–å†…å­˜ä¸è¶³ä¸»åŠ¨é”€æ¯é¡µé¢</p><p>wx.navigateToè·³è½¬çŠ¶æ€ä¸‹ï¼Œé¡µé¢Aå’Œé¡µé¢Bçš„ç”Ÿå‘½å‘¨æœŸé€»è¾‘<br>è¿›å…¥Aé¡µé¢ï¼šAæ‰§è¡ŒonLoad()â€“&gt;onShow()â€“&gt;onReady()ï¼›<br>Aé¡µé¢navigateTo Bé¡µé¢ï¼šAæ‰§è¡ŒonHide()ï¼ŒBæ‰§è¡ŒonLoad()â€“&gt;onShow()â€“&gt;onReady()ï¼›<br>Bé¡µé¢è¿”å›Aé¡µé¢ï¼šBæ‰§è¡ŒonUnload()ï¼ŒAæ‰§è¡ŒonReady()ï¼›<br>é€€å‡ºAé¡µé¢ï¼šAæ‰§è¡ŒonUnload()ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  data:&#123;&#125;,</span><br><span class="line">  onLoad:function(options)&#123;</span><br><span class="line">    // é¡µé¢åˆå§‹åŒ– optionsä¸ºé¡µé¢è·³è½¬æ‰€å¸¦æ¥çš„å‚æ•°</span><br><span class="line">  &#125;,</span><br><span class="line">  onReady:function()&#123;</span><br><span class="line">    // é¡µé¢æ¸²æŸ“å®Œæˆ</span><br><span class="line">  &#125;,</span><br><span class="line">  onShow:function()&#123;</span><br><span class="line">    // é¡µé¢æ˜¾ç¤º</span><br><span class="line">  &#125;,</span><br><span class="line">  onHide:function()&#123;</span><br><span class="line">    // é¡µé¢éšè—</span><br><span class="line">  &#125;,</span><br><span class="line">  onUnload:function()&#123;</span><br><span class="line">    // é¡µé¢å…³é—­</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><ul><li>å¼‚æ­¥è·å–æ•°æ®</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var _this = this;</span><br><span class="line">var param = fetch.requestBase();</span><br><span class="line">param.orderId = e.currentTarget.dataset.id;</span><br><span class="line">var url=config.host+config.orderDelet;</span><br><span class="line">fetch.fetch(&apos;GET&apos;,url,param,(err,res)=&gt;&#123;</span><br><span class="line">    if (res.ecode === &apos;0000&apos;) &#123;</span><br><span class="line">        console.log(res.data);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        fetch.defaultErrorDeal(url,&apos;è¯·æ±‚é”™è¯¯&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="ç‰ˆæœ¬æ§åˆ¶æµç¨‹"><a href="#ç‰ˆæœ¬æ§åˆ¶æµç¨‹" class="headerlink" title="ç‰ˆæœ¬æ§åˆ¶æµç¨‹"></a>ç‰ˆæœ¬æ§åˆ¶æµç¨‹</h3><ul><li>åˆ†æ”¯</li></ul><p>release é¢„å‘å¸ƒæµ‹è¯•åˆ†æ”¯<br>product å‘å¸ƒä¸»åˆ†æ”¯</p><ul><li>å¼€å‘</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git checkout product  </span><br><span class="line">git checkout -b BRANCH</span><br><span class="line">git add .</span><br><span class="line">git commit -m &apos;COMMENT&apos;</span><br></pre></td></tr></table></figure><p>BRANCH åˆ†æ”¯æŒ‰ç…§develop- feature- fixbug-  release- æ¥å‘½å ç®€å†™dev-  fea-  fix-  rel-</p><p>COMMENT ä¸»è¦å†™åŠŸèƒ½ç‚¹ bug ç­‰</p><ul><li>æµ‹è¯•</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git checkout release</span><br><span class="line">git pull origin release</span><br><span class="line">git merge --no-ff BRANCH</span><br><span class="line">git push origin release</span><br></pre></td></tr></table></figure><ul><li>å‘å¸ƒ</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">git push origin BRANCH  </span><br><span class="line">https://gitlab.modernavenue.com/  </span><br><span class="line">Merge Requests --&gt; New Merge Requests --&gt; Select source branch (BRANCH) --&gt; Compare branches and continue  </span><br><span class="line">é€‰æ‹© Assignee, å‹¾é€‰ Remove source branch when merge request is accepted. --&gt; Save Changes  </span><br><span class="line">å¦‚æœæœ‰å†²çªï¼Œéœ€è¦è¿›è¡Œä»¥ä¸‹æ“ä½œ  </span><br><span class="line">git checkout product  </span><br><span class="line">git pull origin product  </span><br><span class="line">git checkout BRANCH  </span><br><span class="line">git merge --no-ff product  </span><br><span class="line">git push origin BRANCH</span><br></pre></td></tr></table></figure><h3 id="ä¸åŒå°ç¨‹åº"><a href="#ä¸åŒå°ç¨‹åº" class="headerlink" title="ä¸åŒå°ç¨‹åº"></a>ä¸åŒå°ç¨‹åº</h3><ul><li>åˆ†æ”¯<br>canudilo-product å¡å¥´å‘å¸ƒåˆ†æ”¯<br>01men-product 01menå‘å¸ƒåˆ†æ”¯<br>canudilo-release å¡å¥´æµ‹è¯•åˆ†æ”¯<br>01men-release 01menæµ‹è¯•åˆ†æ”¯  </li></ul><p>æ›´æ–°ä»¥ä¸Šåˆ†æ”¯éœ€è¦å¢åŠ -r å‚æ•°ï¼ˆrebaseï¼‰  </p><blockquote><p>git pull -r origin BRANCH  </p></blockquote><ul><li>é…ç½®åŒºåˆ«<br>app.json é¦–é¡µè¿›å…¥ä¸åŒä¿®æ”¹ï¼Œæ ‡é¢˜ä¿®æ”¹<br>configs/config.js è¯·æ±‚æ¥å£å¹³å°å‚æ•°ä¸åŒä¿®æ”¹  </li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;å¾®ä¿¡å°ç¨‹åº-ç§»åŠ¨ç«¯å•†åŸ&quot;&gt;&lt;a href=&quot;#å¾®ä¿¡å°ç¨‹åº-ç§»åŠ¨ç«¯å•†åŸ&quot; class=&quot;headerlink&quot; title=&quot;å¾®ä¿¡å°ç¨‹åº-ç§»åŠ¨ç«¯å•†åŸ&quot;&gt;&lt;/a&gt;å¾®ä¿¡å°ç¨‹åº-ç§»åŠ¨ç«¯å•†åŸ&lt;/h1&gt;&lt;hr&gt;
&lt;h3 id=&quot;å®‰è£…&quot;&gt;&lt;a href=&quot;#å®‰è£…&quot; class=
      
    
    </summary>
    
      <category term="javascript" scheme="http://junhey.com/categories/javascript/"/>
    
    
      <category term="javascript" scheme="http://junhey.com/tags/javascript/"/>
    
      <category term="wxapp" scheme="http://junhey.com/tags/wxapp/"/>
    
  </entry>
  
  <entry>
    <title>centosæ­å»ºgitè¿‡ç¨‹</title>
    <link href="http://junhey.com/2017/03/20/centos%E6%90%AD%E5%BB%BAgit%E8%BF%87%E7%A8%8B.html"/>
    <id>http://junhey.com/2017/03/20/centosæ­å»ºgitè¿‡ç¨‹.html</id>
    <published>2017-03-20T14:18:00.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç¡®è®¤æœåŠ¡å™¨æ˜¯å¦å®‰è£…Git"><a href="#ç¡®è®¤æœåŠ¡å™¨æ˜¯å¦å®‰è£…Git" class="headerlink" title="ç¡®è®¤æœåŠ¡å™¨æ˜¯å¦å®‰è£…Git"></a>ç¡®è®¤æœåŠ¡å™¨æ˜¯å¦å®‰è£…Git</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa git</span><br></pre></td></tr></table></figure><h3 id="é¦–å…ˆéœ€è¦å®‰è£…Gitï¼Œå¯ä»¥ä½¿ç”¨yumæºåœ¨çº¿å®‰è£…"><a href="#é¦–å…ˆéœ€è¦å®‰è£…Gitï¼Œå¯ä»¥ä½¿ç”¨yumæºåœ¨çº¿å®‰è£…" class="headerlink" title="é¦–å…ˆéœ€è¦å®‰è£…Gitï¼Œå¯ä»¥ä½¿ç”¨yumæºåœ¨çº¿å®‰è£…"></a>é¦–å…ˆéœ€è¦å®‰è£…Gitï¼Œå¯ä»¥ä½¿ç”¨yumæºåœ¨çº¿å®‰è£…</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y git</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºç”¨æˆ·junhey-git"><a href="#åˆ›å»ºç”¨æˆ·junhey-git" class="headerlink" title="åˆ›å»ºç”¨æˆ·junhey-git"></a>åˆ›å»ºç”¨æˆ·junhey-git</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd junhey-git</span><br><span class="line">passwd junhey-git</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆsshå…¬é’¥"><a href="#ç”Ÿæˆsshå…¬é’¥" class="headerlink" title="ç”Ÿæˆsshå…¬é’¥"></a>ç”Ÿæˆsshå…¬é’¥</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">su junhey-git</span><br><span class="line">cd ~</span><br><span class="line">mkdir .ssh</span><br><span class="line">ssh-keygen -t rsa</span><br><span class="line">cd .ssh/</span><br><span class="line">cat id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</span><br><span class="line">exit</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ junhey-gitåˆ°sudoersæ–‡ä»¶"><a href="#æ·»åŠ junhey-gitåˆ°sudoersæ–‡ä»¶" class="headerlink" title="æ·»åŠ junhey-gitåˆ°sudoersæ–‡ä»¶"></a>æ·»åŠ junhey-gitåˆ°sudoersæ–‡ä»¶</h3><p>junhey-gitç”¨æˆ·ç°åœ¨å¯¹ä¸€äº›æ–‡ä»¶å¤¹æ²¡æœ‰æ“ä½œæƒé™ï¼Œä¿®æ”¹/etc/sudoersæ–‡ä»¶æ¥æ”¹å˜ä»–çš„æƒé™ã€‚æœ€é«˜ç®¡ç†å‘˜ç”¨æˆ·ç”¨ä¸‹é¢å‘½ä»¤æ‰“å¼€ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">visudo</span><br></pre></td></tr></table></figure></p><p>ç„¶åæˆ‘ä»¬åœ¨vimä¸­æ‰¾åˆ°ä¸‹é¢è¿™è¡Œ<br>root ALL=(ALL) ALL<br>æŒ‰ié”®å¼€å§‹æ’å…¥ï¼Œå›è½¦ä¸€ä¸‹åœ¨ä¸‹é¢ä¸€è¡ŒåŠ ä¸Š<br>junhey-git ALL=(ALL) ALL<br>æ¥ç€æŒ‰ä¸‹escé”®ï¼Œè¾“å…¥ :wq ï¼Œå›è½¦ä¿å­˜é€€å‡º</p><h3 id="åˆ›å»ºGitä»£ç ä»“åº“"><a href="#åˆ›å»ºGitä»£ç ä»“åº“" class="headerlink" title="åˆ›å»ºGitä»£ç ä»“åº“"></a>åˆ›å»ºGitä»£ç ä»“åº“</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir gitrepo</span><br><span class="line">cd gitrepo</span><br><span class="line">mkdir test.git</span><br><span class="line">chown -R junhey-git:junhey-git gitrepo/</span><br><span class="line">git init --bare test.git</span><br></pre></td></tr></table></figure><p>git clone ssh:<a href="mailto://username@username.webfactional.com" target="_blank" rel="noopener">//username@username.webfactional.com</a>:/home/username/webapps/git_app/repos/dev.git</p><h3 id="æœ¬åœ°æ‹‰å–ä»£ç -å…‹éš†ä»“åº“"><a href="#æœ¬åœ°æ‹‰å–ä»£ç -å…‹éš†ä»“åº“" class="headerlink" title="æœ¬åœ°æ‹‰å–ä»£ç /å…‹éš†ä»“åº“"></a>æœ¬åœ°æ‹‰å–ä»£ç /å…‹éš†ä»“åº“</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir test</span><br><span class="line">git init</span><br><span class="line">git remote add origin junhey-git@139.129.130.226:/gitrepo/test.git</span><br><span class="line">//æˆ–è€…</span><br><span class="line">git clone junhey-git@139.129.130.226:/gitrepo/test.git</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;ç¡®è®¤æœåŠ¡å™¨æ˜¯å¦å®‰è£…Git&quot;&gt;&lt;a href=&quot;#ç¡®è®¤æœåŠ¡å™¨æ˜¯å¦å®‰è£…Git&quot; class=&quot;headerlink&quot; title=&quot;ç¡®è®¤æœåŠ¡å™¨æ˜¯å¦å®‰è£…Git&quot;&gt;&lt;/a&gt;ç¡®è®¤æœåŠ¡å™¨æ˜¯å¦å®‰è£…Git&lt;/h3&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;
      
    
    </summary>
    
      <category term="linux" scheme="http://junhey.com/categories/linux/"/>
    
    
      <category term="linux" scheme="http://junhey.com/tags/linux/"/>
    
      <category term="git" scheme="http://junhey.com/tags/git/"/>
    
      <category term="centos" scheme="http://junhey.com/tags/centos/"/>
    
  </entry>
  
  <entry>
    <title>javascript å‡½æ•°</title>
    <link href="http://junhey.com/2017/03/17/javascript-function.html"/>
    <id>http://junhey.com/2017/03/17/javascript-function.html</id>
    <published>2017-03-17T04:36:56.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‡½æ•°åˆ›å»ºæ–¹å¼"><a href="#å‡½æ•°åˆ›å»ºæ–¹å¼" class="headerlink" title="å‡½æ•°åˆ›å»ºæ–¹å¼"></a>å‡½æ•°åˆ›å»ºæ–¹å¼</h3><ul><li>å£°æ˜</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function consoleTip ()&#123;</span><br><span class="line">    console.log(&quot;tip!&quot;); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è¡¨è¾¾å¼</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var consoleTip = function()&#123; </span><br><span class="line">    console.log(&quot;tip!&quot;); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¸¤ç§æ–¹å¼å¼‚åŒ</li></ul><ol><li><p>è¡¨è¾¾å¼æ–¹å¼é€‚åˆç”¨æ¥å®šä¹‰åªä½¿ç”¨ä¸€æ¬¡çš„å‡½æ•°ï¼Œå£°æ˜æ–¹å¼å®šä¹‰çš„å‡½æ•°æ²¡æœ‰è¿™ä¸ªé™åˆ¶ï¼Œå½“ç„¶ä¹Ÿä¸æ˜¯ç»å¯¹çš„ï¼Œè¿™ä¸ªåŒºåˆ«åªé€‚ç”¨äºç¼–ç è§„èŒƒä¸Šï¼›</p></li><li><p>å£°æ˜æ–¹å¼å®šä¹‰çš„å‡½æ•°å¯ä»¥åœ¨å‡½æ•°è°ƒç”¨ä¹‹å‰å®šä¹‰ä¹Ÿå¯ä»¥åœ¨å‡½æ•°è°ƒç”¨ä¹‹åå®šä¹‰ï¼Œè€Œè¡¨è¾¾å¼æ–¹å¼å®šä¹‰çš„å‡½æ•°åªèƒ½åœ¨å‡½æ•°è°ƒç”¨ä¹‹å‰å®šä¹‰ï¼›</p></li></ol><h3 id="å‡½æ•°å‚æ•°"><a href="#å‡½æ•°å‚æ•°" class="headerlink" title="å‡½æ•°å‚æ•°"></a>å‡½æ•°å‚æ•°</h3><p>å‡½æ•°å‚æ•°åŒ…æ‹¬å½¢å‚ï¼Œå®å‚ï¼Œå½¢å‚å°±æ˜¯å‡½æ•°å®šä¹‰æ—¶çš„å‚æ•°ï¼›å®å‚å°±æ˜¯å‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°ã€‚ç”±äºjsæ˜¯å¼±ç±»å‹è¯­è¨€ï¼Œæ‰€ä»¥jså‡½æ•°çš„å½¢å‚ä¸æŒ‡å®šç±»å‹ã€‚</p><p>jså‡½æ•°çš„å½¢å‚å’Œå®å‚ä¸ªæ•°å¯ä»¥ä¸ä¸€è‡´ã€‚å½¢å‚ä¸ªæ•°å°äºå®å‚æ—¶ï¼Œæœªä¼ çš„å½¢å‚å€¼éƒ½æ˜¯undefined,æ³¨æ„å½¢å‚å¯ä»¥æŒ‡å®šé»˜è®¤å€¼ï¼Œä½†æ˜¯åªèƒ½åœ¨å‡½æ•°ä½“å†…éƒ¨æŒ‡å®š;å½¢å‚ä¸ªæ•°å°äºå®å‚æ—¶ï¼Œåœ¨å‡½æ•°ä½“å†…å¼•ç”¨å¤šä½™å®å‚ï¼Œå¿…é¡»é€šè¿‡å®å‚å¯¹è±¡argumentsæ¥è·å–å®å‚ï¼Œåœ¨å‡½æ•°ä½“å†…éƒ¨argumentså°±æ˜¯å®å‚å¯¹è±¡çš„å¼•ç”¨ï¼Œå¹¶ä¸”æ­¤æ—¶çš„å®å‚å¯¹è±¡æ˜¯ä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼Œæ•°ç»„å¯¹è±¡æ¯ä¸€é¡¹å¯¹åº”ç€å‡½æ•°è°ƒç”¨æ—¶ä¼ å…¥çš„å‚æ•°ã€‚</p><p>PSï¼šå®å‚å¯¹è±¡æœ‰ä¸¤ä¸ªç‰¹æ®Šå±æ€§calleeå’Œcallerï¼Œå…¶ä¸­calleeå±æ€§ä»£æŒ‡å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°ï¼Œcallerå±æ€§ä»£æŒ‡è°ƒç”¨å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°çš„å‡½æ•°ï¼Œcallerå±æ€§ä¸æ˜¯æ ‡å‡†å±æ€§ï¼Œä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒã€‚ä½¿ç”¨calleeå±æ€§çš„å…¸å‹ä¾‹å­å°±æ˜¯åŒ¿åå‡½æ•°çš„é€’å½’è°ƒç”¨ã€‚ä¾‹å¦‚å®šä¹‰ä¸€ä¸ªé˜¶ä¹˜å‡½æ•°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var fact = function(x)&#123; </span><br><span class="line">    if(x &lt;= 1) &#123;</span><br><span class="line">        return 1;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        return arguments.callee(x-1)*x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h3 id="å‡½æ•°ä½œç”¨åŸŸ"><a href="#å‡½æ•°ä½œç”¨åŸŸ" class="headerlink" title="å‡½æ•°ä½œç”¨åŸŸ"></a>å‡½æ•°ä½œç”¨åŸŸ</h3><p>åœ¨å‡½æ•°ä¸­å£°æ˜çš„å˜é‡(åŒ…æ‹¬å‡½æ•°å½¢å‚)åœ¨æ•´ä¸ªå‡½æ•°ä½“å†…éƒ½æ˜¯å¯è§çš„ï¼ŒåŒ…æ‹¬åµŒå¥—çš„å‡½æ•°ä¸­ï¼Œåœ¨å‡½æ•°å¤–éƒ¨æ˜¯ä¸å¯è§çš„;å‡½æ•°ä½“å†…éƒ¨å®šä¹‰çš„å˜é‡ä¼šè¦†ç›–åŒåçš„å…¨å±€å˜é‡;</p><p>å‡½æ•°ä½œç”¨åŸŸä¸­æœ‰ä¸ªç‰¹æ€§å¾ˆé‡è¦ï¼Œå°±æ˜¯<em>å£°æ˜æå‰</em>ï¼Œæ„æ€å°±æ˜¯åœ¨å‡½æ•°å†…éƒ¨ä»»æ„ä½ç½®å£°æ˜çš„å˜é‡ï¼Œåœ¨å‡½æ•°ä½“å†…éƒ¨ä»»æ„ä½ç½®éƒ½æ˜¯å¯è§çš„ï¼Œè¿™æ˜¯å› ä¸ºjså¼•æ“åœ¨é¢„ç¼–è¯‘jsæ—¶ä¼šæŠŠå‡½æ•°ä¸­æ‰€æœ‰çš„å˜é‡å£°æ˜éƒ½æå‰è‡³å‡½æ•°ä½“é¡¶éƒ¨ã€‚ä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var scope = &quot;outter&quot;;</span><br><span class="line">function()&#123;</span><br><span class="line">    console.log(scope);  //undefined</span><br><span class="line">    var scope = &quot;inner&quot;;</span><br><span class="line">    console.log(scope); //inner</span><br><span class="line">&#125;();</span><br><span class="line">console.log(scope);     //outter</span><br></pre></td></tr></table></figure></p><p>è¯´æ˜ï¼š<br>ã€€ã€€undefinedã€€ç”±äºå‡½æ•°ä½œç”¨åŸŸçš„å£°æ˜æå‰ç‰¹æ€§ï¼Œè¿™é‡Œçš„scopeå·²ç»åœ¨å‡½æ•°é¡¶éƒ¨å£°æ˜ï¼Œä½†æ˜¯æ²¡æœ‰è¢«èµ‹å€¼ï¼Œæ‰€ä»¥scopeå€¼ä¸ºundefined<br>ã€€ã€€innerã€€scopeåœ¨å‡½æ•°ä½“å†…éƒ¨å£°æ˜ï¼Œå¹¶ä¸”æœ‰èµ‹å€¼<br>ã€€ã€€outter ã€€å‡½æ•°ä½“å†…éƒ¨å®šä¹‰çš„å˜é‡ä¼šè¦†ç›–åŒåçš„å…¨å±€å˜é‡ï¼Œä½†æ˜¯ä¸å½±å“å…¨å±€å˜é‡çš„å€¼</p><h3 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h3><p>æ„é€ å‡½æ•°çš„ç”¨å¤„å°±æ˜¯ç”¨æ¥åˆå§‹åŒ–æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œä¾‹å­ï¼š`var ary = new Array();</p><p>æ„é€ å‡½æ•°ä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«ï¼š<br>ã€€1.å‡½æ•°å‘½åä¸Šæœ‰åŒºåˆ«ï¼Œæ„é€ å‡½æ•°å‘½åæ—¶é€šå¸¸æ˜¯é¦–å­—ç¬¦å¤§å†™ï¼Œæ™®é€šå‡½æ•°å‘½åæ—¶é¦–å­—ç¬¦å°å†™ï¼›<br>ã€€2.è°ƒç”¨æ–¹å¼çš„åŒºåˆ«ï¼Œæ„é€ å‡½æ•°æ˜¯é€šè¿‡newå…³é”®å­—è°ƒç”¨ï¼Œè€Œæ™®é€šå‡½æ•°ç›´æ¥è°ƒç”¨ã€‚</p><h3 id="ç«‹å³æ‰§è¡Œå‡½æ•°"><a href="#ç«‹å³æ‰§è¡Œå‡½æ•°" class="headerlink" title="ç«‹å³æ‰§è¡Œå‡½æ•°"></a>ç«‹å³æ‰§è¡Œå‡½æ•°</h3><p>æŠŠå‡½æ•°å®šä¹‰å’Œå‡½æ•°æ‰§è¡Œç»“åˆåˆ°ä¸€èµ·å°±æ˜¯ç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œä¹Ÿå«è‡ªæ‰§è¡Œå‡½æ•°ã€‚</p><p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼š</p><ol><li>å‡½æ•°å®šä¹‰ä»…é™äºè¡¨è¾¾å¼æ–¹å¼å®šä¹‰çš„å‡½æ•°ï¼›</li><li>å‡½æ•°æ‰§è¡Œå®é™…ä¸Šå°±æ˜¯å¯¹å‡½æ•°è¡¨è¾¾å¼åšä¸€æ¬¡è¿ç®—ï¼Œæ‰€ä»¥ä¸€å…ƒè¿ç®—ç¬¦éƒ½å¯ä»¥è®©å‡½æ•°æ‰§è¡Œã€‚</li></ol><p>è¿™æ ·çš„è¯ï¼Œç«‹å³æ‰§è¡Œå‡½æ•°å°±ä¼šæœ‰å¤šç§å†™æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(function()&#123;console.log(&quot;IIFE&quot;);&#125;());</span><br><span class="line">(function()&#123;console.log(&quot;IIFE&quot;);&#125;)();</span><br><span class="line">!function()&#123;console.log(&quot;IIFE&quot;);&#125;();</span><br><span class="line">void function()&#123;console.log(&quot;IIFE&quot;);&#125;();</span><br><span class="line">~function()&#123;console.log(&quot;IIFE&quot;);&#125;();</span><br><span class="line">//....</span><br></pre></td></tr></table></figure></p><p>ç«‹å³æ‰§è¡Œå‡½æ•°å¯ä»¥æ¥å—å‚æ•°ï¼Œä¸Šé¢çš„å†™æ³•éƒ½æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ç¼–ç è§„èŒƒæ¨èç¬¬ä¸€ç§å†™æ³•ï¼ŒjQueryåº“ä½¿ç”¨çš„å°±æ˜¯ç¬¬ä¸€ç§å†™æ³•ã€‚</p><p>é‚£ä¹ˆè‡ªæ‰§è¡Œå‡½æ•°çš„ç”¨å¤„æœ‰å“ªäº›å‘¢ï¼Ÿæ€»ç»“èµ·æ¥å¸¸ç”¨ä¹Ÿå°±ä¸¤ç§ï¼š</p><ol><li>ä¿å­˜å‚æ•°ä¸Šä¸‹æ–‡ç¯å¢ƒï¼›</li><li>ä½œä¸ºå‘½åç©ºé—´ã€‚</li></ol><p>ç”¨å¤„1çš„é€‚ç”¨åœºæ™¯ï¼šå¾ªç¯ä¸­æ‰§è¡Œå¼‚æ­¥å‡½æ•°ï¼Œå¹¶ä¸”å‡½æ•°å‚æ•°éšå¾ªç¯å˜åŒ–ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">* å®ä¾‹ä¸€</span><br><span class="line">* é”™è¯¯å†™æ³•,å› ä¸ºjQueryçš„postæ–¹æ³•æ˜¯å¼‚æ­¥çš„ï¼Œå¾ªç¯åæ¬¡ï¼Œpostæ–¹æ³•å¹¶è¡Œè·‘åæ¬¡ï¼Œ</span><br><span class="line">* å¾ªç¯æ¯”postæ–¹æ³•æ‰§è¡Œè¦å¿«ï¼Œæœ€ç»ˆä¼ è¿‡å»çš„iå€¼éƒ½å˜æˆäº†10,å³æœåŠ¡ç«¯æ”¶åˆ°indexçš„éƒ½æ˜¯10</span><br><span class="line">*/</span><br><span class="line">for(var i=0; i&lt;10; i++)&#123;</span><br><span class="line">    $.post(url,&#123;index:i&#125;,function()&#123;&#125;);</span><br><span class="line">&#125;</span><br><span class="line">/**</span><br><span class="line">* æ­£ç¡®å†™æ³•,è¿™æ ·å¯¹äºå¾ªç¯ä½“ä¸­çš„ç«‹å³æ‰§è¡Œå‡½æ•°æ¥è¯´ï¼Œæ¯æ¬¡å¾ªç¯å¾—åˆ°çš„å‚æ•°éƒ½ä¸åŒã€‚ç«‹å³æ‰§è¡Œå‡½æ•°</span><br><span class="line">* æ¯æ‰§è¡Œä¸€æ¬¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œåœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒä¸­çš„å˜é‡å€¼ä¸å—å¤–ç•Œå½±å“ï¼Œ</span><br><span class="line">* å¾ªç¯åæ¬¡å°±ä¼šåˆ›å»ºåä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå¹¶ä¸”æ¯ä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒçš„iå€¼éƒ½ä¸ä¸€æ ·ã€‚è¿™æ ·çš„è¯ï¼Œ</span><br><span class="line">* è™½ç„¶postæ–¹æ³•æ˜¯å¼‚æ­¥æ–¹æ³•ï¼Œä½†æ˜¯æ˜¯åœ¨æ¯ä¸€ä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒä¸­æ‰§è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¾ªç¯åæ¬¡ï¼Œ</span><br><span class="line">* postæ–¹æ³•åœ¨åä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒä¸­åˆ†åˆ«æ‰§è¡Œäº†ä¸€æ¬¡ï¼Œpostæ–¹æ³•ä¸­ä½¿ç”¨çš„indexå‚æ•°æ¯æ¬¡éƒ½ä¸ä¸€æ ·ï¼Œ</span><br><span class="line">* æœ€ç»ˆæœåŠ¡ç«¯æ”¶åˆ°çš„indexå€¼å°±æ˜¯ä»0åˆ°9åä¸ªæ•°å€¼</span><br><span class="line">*/</span><br><span class="line">for(var i=0; i&lt;10; i++)&#123;</span><br><span class="line">    (function(index)&#123;$.post(url,&#123;index:index&#125;,function()&#123;&#125;);&#125;(i));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">* å®ä¾‹äºŒ    </span><br><span class="line">* é”™è¯¯å†™æ³•ï¼Œæœ€ç»ˆä¼šè¾“å‡ºåä¸ª10ï¼Œå› ä¸ºå¾ªç¯ä½“çš„è¯­å¥ä¼šå»¶æ—¶æ‰§è¡Œ</span><br><span class="line">*/</span><br><span class="line">for(var i=0; i&lt;10; i++)&#123;</span><br><span class="line">    setTimeout(function()&#123;console.log(i);&#125;,100);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//æ­£ç¡®å†™æ³•ï¼Œæœ€ç»ˆä¼šè¾“å‡º0åˆ°9åä¸ªæ•°å€¼ï¼ŒåŸç†åŒä¸Š</span><br><span class="line">for(var i=0; i&lt;10; i++)&#123;</span><br><span class="line">    (function(x)&#123;setTimeout(function()&#123;console.log(x);&#125;,100);&#125;(i));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”¨å¤„2çš„é€‚ç”¨åœºæ™¯ï¼šä½ éœ€è¦å†™ä¸€ä¸ªå…¬å…±æ¨¡å—ï¼Œè¿™ä¸ªå…¬å…±æ¨¡å—åœ¨å¾ˆå¤šåœ°æ–¹éƒ½ä¼šä½¿ç”¨ï¼Œä½†æ˜¯è¦ä¿è¯å…¬å…±æ¨¡å—ä¸­ä½¿ç”¨çš„å˜é‡å’Œå‡½æ•°ä¸ä¼šå¯¹å…¶å®ƒæ¨¡å—é€ æˆæ±¡æŸ“ï¼Œè¿™æ ·çš„è¯è¿™ä¸ªå…¬å…±æ¨¡å—å°±éœ€è¦ä¸€ä¸ªå•ç‹¬çš„ä¸åŒäºå…¶å®ƒæ¨¡å—çš„å‘½åç©ºé—´ã€‚</p><p>æ¡ˆä¾‹1ï¼šåˆ›å»ºjQueryæ’ä»¶ï¼Œä¿è¯åˆ›å»ºçš„jQueryæ’ä»¶åœ¨jQueryçš„å‘½åç©ºé—´å†…éƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œè¿™æ ·æ¯ä¸ªjQueryå¯¹è±¡æ‰å¯ä»¥ä½¿ç”¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(function($)&#123;</span><br><span class="line">    $.fn.changeStyle = function(colorStr)&#123;</span><br><span class="line">        this.css(&quot;color&quot;,colorStr);        </span><br><span class="line">        return this;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;(jQuery));</span><br></pre></td></tr></table></figure><p><a href="http://www.jianshu.com/p/518d424d4994" target="_blank" rel="noopener">jQueryæ’ä»¶å¼€å‘</a></p><p>æ¡ˆä¾‹2ï¼šåˆ›å»ºä¸€ä¸ªå¸¦æœ‰ç§æœ‰å˜é‡å’Œç§æœ‰æ–¹æ³•çš„å¯¹è±¡ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var obj = (function()&#123;</span><br><span class="line">    var privateAttr,</span><br><span class="line">        publicAttr;        </span><br><span class="line">    function _setPriAttr()&#123;</span><br><span class="line">        privateAttr = &quot;private&quot;;</span><br><span class="line">    &#125;        </span><br><span class="line">    function getPriAttr()&#123;</span><br><span class="line">        return privateAttr;</span><br><span class="line">    &#125;        </span><br><span class="line">    return &#123;</span><br><span class="line">        attr:publicAttr,            </span><br><span class="line">        getAttr:function()&#123;</span><br><span class="line">            getPriAttr();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure></p><p>é€šè¿‡è¿™ç§æ–¹å¼åˆ›å»ºçš„å¯¹è±¡ï¼Œåˆ©ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°çš„returnè¯­å¥å¯¹å¤–æš´éœ²å±æ€§ä»¥åŠæ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥ä¿è¯æ²¡æœ‰å¯¹å¤–æš´éœ²å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œåœ¨å¯¹è±¡å¤–è¾¹æ˜¯æ— æ³•è®¿é—®åˆ°çš„ã€‚</p><p>æ€»ç»“ï¼šå…¶å®ç”¨å¤„1å’Œç”¨å¤„2çš„åŸç†éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯åˆ©ç”¨äº†å‡½æ•°ä½œç”¨åŸŸçš„æ¦‚å¿µï¼Œè¯·ä»”ç»†ä½“ä¼šã€‚</p><p>å‚è€ƒèµ„æ–™ï¼š <a href="https://item.jd.com/10974436.html" target="_blank" rel="noopener">jsæƒå¨æŒ‡å—</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;å‡½æ•°åˆ›å»ºæ–¹å¼&quot;&gt;&lt;a href=&quot;#å‡½æ•°åˆ›å»ºæ–¹å¼&quot; class=&quot;headerlink&quot; title=&quot;å‡½æ•°åˆ›å»ºæ–¹å¼&quot;&gt;&lt;/a&gt;å‡½æ•°åˆ›å»ºæ–¹å¼&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å£°æ˜&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;t
      
    
    </summary>
    
      <category term="javascript" scheme="http://junhey.com/categories/javascript/"/>
    
    
      <category term="javascript" scheme="http://junhey.com/tags/javascript/"/>
    
      <category term="function" scheme="http://junhey.com/tags/function/"/>
    
  </entry>
  
  <entry>
    <title>phantomjså®‰è£…åœ¨centoså’Œå…¥é—¨æ•™ç¨‹</title>
    <link href="http://junhey.com/2017/03/01/phantomjs-install-centos.html"/>
    <id>http://junhey.com/2017/03/01/phantomjs-install-centos.html</id>
    <published>2017-03-01T03:36:00.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å®˜æ–¹ç½‘ç«™"><a href="#å®˜æ–¹ç½‘ç«™" class="headerlink" title="å®˜æ–¹ç½‘ç«™"></a>å®˜æ–¹ç½‘ç«™</h3><p><a href="http://phantomjs.org/" target="_blank" rel="noopener">http://phantomjs.org/</a></p><p><a href="http://phantomjs.org/download.html" target="_blank" rel="noopener">ä¸‹è½½ä¸å®‰è£…</a></p><h3 id="å®‰è£…æ­¥éª¤"><a href="#å®‰è£…æ­¥éª¤" class="headerlink" title="å®‰è£…æ­¥éª¤"></a>å®‰è£…æ­¥éª¤</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#å®‰è£…ä¾èµ–è½¯ä»¶</span><br><span class="line">yum -y install wget fontconfig</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#ä¸‹è½½å®‰è£…åŒ…</span><br><span class="line">wget https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-2.1.1-linux-x86_64.tar.bz2</span><br><span class="line"></span><br><span class="line">#è§£å‹å®‰è£…åŒ…</span><br><span class="line">tar xjf phantomjs-2.1.1-linux-x86_64.tar.bz2 -C /usr/local/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#é‡å‘½å</span><br><span class="line">mv /usr/local/phantomjs-2.1.1-linux-x86_64 /usr/local/phantomjs</span><br><span class="line"></span><br><span class="line">#æ·»åŠ ç¯å¢ƒå˜é‡/å»ºç«‹è½¯é“¾æ¥</span><br><span class="line">export PHANTOMJS_HOME=/usr/local/phantomjs/bin</span><br><span class="line">ln -s /usr/local/phantomjs/bin/phantomjs /usr/bin/</span><br><span class="line"></span><br><span class="line">#æµ‹è¯•</span><br><span class="line">phantomjs --version</span><br></pre></td></tr></table></figure><h3 id="å…¥é—¨"><a href="#å…¥é—¨" class="headerlink" title="å…¥é—¨"></a>å…¥é—¨</h3><p><a href="http://phantomjs.org/documentation/" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><p><a href="http://javascript.ruanyifeng.com/tool/phantomjs.html" target="_blank" rel="noopener">PhantomJSæ•™ç¨‹</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;å®˜æ–¹ç½‘ç«™&quot;&gt;&lt;a href=&quot;#å®˜æ–¹ç½‘ç«™&quot; class=&quot;headerlink&quot; title=&quot;å®˜æ–¹ç½‘ç«™&quot;&gt;&lt;/a&gt;å®˜æ–¹ç½‘ç«™&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://phantomjs.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;
      
    
    </summary>
    
      <category term="javascript" scheme="http://junhey.com/categories/javascript/"/>
    
    
      <category term="javascript" scheme="http://junhey.com/tags/javascript/"/>
    
      <category term="phantomjs" scheme="http://junhey.com/tags/phantomjs/"/>
    
  </entry>
  
  <entry>
    <title>é˜¿é‡Œäº‘centosæ­å»ºnginxå’Œnodeå…¨è¿‡ç¨‹</title>
    <link href="http://junhey.com/2017/02/26/aliyun-centos-nginx-and-node-the-whole-process.html"/>
    <id>http://junhey.com/2017/02/26/aliyun-centos-nginx-and-node-the-whole-process.html</id>
    <published>2017-02-26T08:59:09.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<p><em>centosç‰ˆæœ¬:CentOS release 6.8 (Final)</em></p><ol><li>sshç™»å½•<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@139.129.130.226</span><br></pre></td></tr></table></figure></li></ol><p>ç„¶åè¾“å…¥å¯†ç </p><ol start="2"><li><p>yumæ›´æ–°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y update</span><br></pre></td></tr></table></figure></li><li><p>ç¼–è¯‘æºä»£ç çš„å¼€å‘å·¥å…·</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y groupinstall &quot;Development Tools&quot;</span><br></pre></td></tr></table></figure></li></ol><h2 id="å®‰è£…node-js"><a href="#å®‰è£…node-js" class="headerlink" title="å®‰è£…node.js"></a>å®‰è£…node.js</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#è¿›å…¥/usr/srcæ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹é€šå¸¸ç”¨æ¥å­˜æ”¾è½¯ä»¶æºä»£ç </span><br><span class="line">cd /usr/src</span><br><span class="line"></span><br><span class="line">#ä»Node.jsçš„ç«™ç‚¹ä¸­è·å–å‹ç¼©æ¡£æºä»£ç , æˆ‘é€‰æ‹©çš„ç‰ˆæœ¬ä¸ºv0.10.18</span><br><span class="line">wget http://nodejs.org/dist/v0.10.18/node-v0.10.18.tar.gz</span><br><span class="line"></span><br><span class="line">#è§£å‹ç¼©æºæ–‡ä»¶ï¼Œå¹¶ä¸”è¿›å…¥åˆ°å‹ç¼©åçš„æ–‡ä»¶å¤¹ä¸­</span><br><span class="line">tar zxf node-v0.10.18.tar.gz </span><br><span class="line">cd node-v0.10.18 </span><br><span class="line"></span><br><span class="line">#æ‰§è¡Œé…ç½®è„šæœ¬æ¥è¿›è¡Œç¼–è¯‘é¢„å¤„ç†</span><br><span class="line">./configure</span><br><span class="line">make&amp;make install</span><br><span class="line"></span><br><span class="line">#æµ‹è¯•å®‰è£…Node.jsçš„æ¨¡å—ç®¡ç†å™¨npm</span><br><span class="line">npm -g install express</span><br><span class="line"></span><br><span class="line">#å»ºç«‹è¶…çº§é“¾æ¥, ä¸ç„¶ sudo node æ—¶ä¼šæŠ¥ &quot;command not found&quot;</span><br><span class="line">sudo ln -s /usr/local/bin/node /usr/bin/node </span><br><span class="line">sudo ln -s /usr/local/lib/node /usr/lib/node </span><br><span class="line">sudo ln -s /usr/local/bin/npm /usr/bin/npm</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…-Nginx"><a href="#å®‰è£…-Nginx" class="headerlink" title="å®‰è£… Nginx"></a>å®‰è£… Nginx</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#å®‰è£…ä¸€äº›é¢å¤–çš„è½¯ä»¶ä»“åº“</span><br><span class="line">sudo yum install epel-release -y</span><br><span class="line">rpm -ivh http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm</span><br><span class="line"></span><br><span class="line">#åŒ…ç®¡ç†å·¥å…·å®‰è£…nginx</span><br><span class="line">sudo yum install nginx -y</span><br><span class="line"></span><br><span class="line">#å¯åŠ¨</span><br><span class="line">service nginx start</span><br></pre></td></tr></table></figure><p>é€šè¿‡å…¬ç½‘ip (æœ¬åœ°å¯ä»¥é€šè¿‡ localhost /æˆ– 127.0.0.1 ) æŸ¥çœ‹nginx æœåŠ¡è¿”å›çš„ä¿¡æ¯:<br><em>Welcome to nginx!</em></p><p>å…¶ä¸­å¯åŠ¨è¿‡ç¨‹æŠ¥é”™ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Starting nginx: nginx: [emerg] socket() [::]:80 failed (97: Address family not supported by protocol)</span><br><span class="line">                                                           [FAILED]</span><br></pre></td></tr></table></figure></p><p>è§£å†³åŠæ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/conf.d/default.conf</span><br></pre></td></tr></table></figure></p><p>å°†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">listen       80 default_server;</span><br><span class="line">listen       [::]:80 default_server;</span><br></pre></td></tr></table></figure></p><p>æ”¹ä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">listen       80;</span><br><span class="line">#listen       [::]:80 default_server;</span><br></pre></td></tr></table></figure></p><p>é‡æ–°å¯åŠ¨nginxå³å¯ è¯•è¿‡kill nginx è¿›ç¨‹ï¼Œä¿®æ”¹å…³é—­ipv6éƒ½ä¸ç®¡ç”¨</p><h2 id="å®‰è£…mongodb"><a href="#å®‰è£…mongodb" class="headerlink" title="å®‰è£…mongodb"></a>å®‰è£…mongodb</h2><p>å®‰è£…è¯´æ˜ï¼š</p><ul><li>ç³»ç»Ÿç¯å¢ƒï¼šCentos-6.8</li><li>å®‰è£…è½¯ä»¶ï¼šmongodb-linux-x86_64-2.4.9.tgz</li><li>ä¸‹è½½åœ°å€ï¼š<a href="http://fastdl.mongodb.org/linux/mongodb-linux-x86_64-2.4.9.tgz" target="_blank" rel="noopener">http://fastdl.mongodb.org/linux/mongodb-linux-x86_64-2.4.9.tgz</a></li><li>ä¸Šä¼ ä½ç½®ï¼š/usr/local/</li><li>è½¯ä»¶å®‰è£…ä½ç½®ï¼š/usr/local/mongodb</li><li>æ•°æ®å­˜æ”¾ä½ç½®ï¼š/var/mongodb/data - æ—¥å¿—å­˜æ”¾ä½ç½®ï¼š/var/mongodb/logs</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#è¿›å…¥æ–‡ä»¶å¤¹/usr/local,ä¸‹è½½mongodbæºä»£ç </span><br><span class="line">cd /usr/local</span><br><span class="line">wget http://fastdl.mongodb.org/linux/mongodb-linux-x86_64-2.4.9.tgz</span><br><span class="line"></span><br><span class="line">#è§£å‹å®‰è£…åŒ…ï¼Œé‡å‘½åæ–‡ä»¶å¤¹ä¸ºmongodb</span><br><span class="line">tar zxvf mongodb-linux-x86_64-2.4.9.tgz </span><br><span class="line">mv mongodb-linux-x86_64-2.4.9 mongodb</span><br><span class="line"></span><br><span class="line">#åœ¨varæ–‡ä»¶å¤¹é‡Œå»ºç«‹mongodbæ–‡ä»¶å¤¹ï¼Œå¹¶åˆ†åˆ«å»ºç«‹æ–‡ä»¶å¤¹dataç”¨äºå­˜æ”¾æ•°æ®ï¼Œlogsç”¨äºå­˜æ”¾æ—¥å¿—</span><br><span class="line">mkdir /var/mongodb</span><br><span class="line">mkdir /var/mongodb/data</span><br><span class="line">mkdir /var/mongodb/logs</span><br><span class="line"></span><br><span class="line">#æ‰“å¼€rc.localæ–‡ä»¶ï¼Œæ·»åŠ CentOSå¼€æœºå¯åŠ¨é¡¹</span><br><span class="line">vim /etc/rc.d/rc.local</span><br><span class="line"></span><br><span class="line">#å°†mongodbå¯åŠ¨å‘½ä»¤è¿½åŠ åˆ°æœ¬æ–‡ä»¶ä¸­ï¼Œè®©mongodbå¼€æœºè‡ªå¯åŠ¨</span><br><span class="line">/usr/local/mongodb/bin/mongod --dbpath=/var/mongodb/data --logpath /var/mongodb/logs/log.log -fork</span><br><span class="line"></span><br><span class="line">#å¯åŠ¨mongodb</span><br><span class="line">/usr/local/mongodb/bin/mongod --dbpath=/var/mongodb/data --logpath /var/mongodb/logs/log.log -fork</span><br><span class="line"></span><br><span class="line">#çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯è¯´æ˜å·²ç»å®‰è£…å®Œæˆå¹¶æˆåŠŸå¯åŠ¨</span><br><span class="line">forked process: 18394</span><br><span class="line">all output going to: /var/mongodb/logs/log.log</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;em&gt;centosç‰ˆæœ¬:CentOS release 6.8 (Final)&lt;/em&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;sshç™»å½•&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span c
      
    
    </summary>
    
    
      <category term="node" scheme="http://junhey.com/tags/node/"/>
    
      <category term="php" scheme="http://junhey.com/tags/php/"/>
    
      <category term="centos" scheme="http://junhey.com/tags/centos/"/>
    
      <category term="nginx" scheme="http://junhey.com/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://junhey.com/2016/12/31/hello-world.html"/>
    <id>http://junhey.com/2016/12/31/hello-world.html</id>
    <published>2016-12-31T16:00:00.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>JavaScriptä¸­çš„ç«‹å³æ‰§è¡Œå‡½æ•°</title>
    <link href="http://junhey.com/2016/11/29/Immediate-execution-function-in-JavaScript.html"/>
    <id>http://junhey.com/2016/11/29/Immediate-execution-function-in-JavaScript.html</id>
    <published>2016-11-29T00:18:00.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<p>æ³¨ï¼šæ­¤æ–‡åªåœ¨ç†è§£ç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œä¸åœ¨æ‰€è°“åŸåˆ›ï¼Œæ–‡ä¸­å¤§é‡å¼•ç”¨<a href="http://javascript.ruanyifeng.com/grammar/function.html#toc23" target="_blank" rel="noopener">é˜®ä¸€å³°çš„JavaScriptæ ‡å‡†å‚è€ƒæ•™ç¨‹</a>ã€<a href="http://javascript.ruanyifeng.com/grammar/function.html#toc23" target="_blank" rel="noopener">MDNçš„JavaScript å‚è€ƒæ–‡æ¡£</a>å’Œ<a href="http://www.cnblogs.com/tomxu/archive/2011/12/31/2289423.html" target="_blank" rel="noopener">æ·±å…¥ç†è§£JavaScriptç³»åˆ—ï¼ˆ4ï¼‰ï¼šç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼</a>çš„å†…å®¹ã€‚</p><p>æè¿°<br>ç«‹å³æ‰§è¡Œå‡½æ•°é€šå¸¸æœ‰ä¸‹é¢ä¸¤ç§å†™æ³•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(function()&#123; </span><br><span class="line">   ...</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">(function()&#123; </span><br><span class="line">    ...</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure></p><p>åœ¨Javascriptä¸­ï¼Œä¸€å¯¹åœ†æ‹¬å·â€œ()â€æ˜¯ä¸€ç§è¿ç®—ç¬¦ï¼Œè·Ÿåœ¨å‡½æ•°åä¹‹åï¼Œè¡¨ç¤ºè°ƒç”¨è¯¥å‡½æ•°ã€‚æ¯”å¦‚ï¼Œprint()å°±è¡¨ç¤ºè°ƒç”¨printå‡½æ•°ã€‚<br>è¿™ä¸ªå†™æ³•å’Œæˆ‘ä»¬æƒ³è±¡çš„å†™æ³•ä¸ä¸€æ ·ï¼ˆçŸ¥é“çš„äººå½“ç„¶å·²ç»ä¹ ä»¥ä¸ºå¸¸ï¼‰å¾ˆå¤šäººåˆšå¼€å§‹ç†è§£ç«‹å³æ‰§è¡Œå‡½æ•°çš„æ—¶å€™ï¼Œè§‰å¾—åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function ()&#123; ... &#125;()ï¼›</span><br><span class="line"></span><br><span class="line">//æˆ–è€…</span><br><span class="line"></span><br><span class="line">function fName()&#123; ... &#125;();</span><br></pre></td></tr></table></figure></p><p>ç„¶è€Œäº‹å®å´æ˜¯è¿™æ ·ï¼šSyntaxError: Unexpected token (ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>è§£é‡Š<br>è¦ç†è§£ç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œéœ€è¦å…ˆç†è§£ä¸€äº›å‡½æ•°çš„åŸºæœ¬æ¦‚å¿µï¼šå‡½æ•°å£°æ˜ã€å‡½æ•°è¡¨è¾¾å¼,å› ä¸ºæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•°é€šå¸¸éƒ½æ˜¯é€šè¿‡è¿™ä¸¤ç§æ–¹å¼</p><p>å‡½æ•°å£°æ˜ (function è¯­å¥)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function name([param[, param[, ... param]]]) &#123;</span><br><span class="line">   statements</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>nameï¼šå‡½æ•°åï¼›<br>paramï¼šè¢«ä¼ å…¥å‡½æ•°çš„å‚æ•°çš„åç§°,ä¸€ä¸ªå‡½æ•°æœ€å¤šå¯ä»¥æœ‰255ä¸ªå‚æ•°ï¼›<br>statementsï¼šè¿™äº›è¯­å¥ç»„æˆäº†å‡½æ•°çš„å‡½æ•°ä½“ã€‚</p><p>å‡½æ•°è¡¨è¾¾å¼ (function expression)</p><p>å‡½æ•°è¡¨è¾¾å¼å’Œå‡½æ•°å£°æ˜éå¸¸ç±»ä¼¼,å®ƒä»¬ç”šè‡³æœ‰ç›¸åŒçš„è¯­æ³•ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function [name]([param] [, param] [..., param]) &#123;</span><br><span class="line">   statements</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>nameï¼šå‡½æ•°å,å¯ä»¥çœç•¥,çœç•¥å‡½æ•°åçš„è¯,è¯¥å‡½æ•°å°±æˆä¸ºäº†åŒ¿åå‡½æ•°ï¼›<br>paramï¼šè¢«ä¼ å…¥å‡½æ•°çš„å‚æ•°çš„åç§°,ä¸€ä¸ªå‡½æ•°æœ€å¤šå¯ä»¥æœ‰255ä¸ªå‚æ•°ï¼›<br>statementsï¼šè¿™äº›è¯­å¥ç»„æˆäº†å‡½æ•°çš„å‡½æ•°ä½“ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬ç»™å‡ºä¸€äº›æ —å­è¯´æ˜ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// å£°æ˜å‡½æ•°f1</span><br><span class="line">function f1() &#123;</span><br><span class="line">    console.log(&quot;f1&quot;);</span><br><span class="line">&#125;</span><br><span class="line">// é€šè¿‡()æ¥è°ƒç”¨æ­¤å‡½æ•°</span><br><span class="line">f1();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//ä¸€ä¸ªåŒ¿åå‡½æ•°çš„å‡½æ•°è¡¨è¾¾å¼ï¼Œè¢«èµ‹å€¼ç»™å˜é‡f2:</span><br><span class="line">var f2 = function() &#123;</span><br><span class="line">    console.log(&quot;f2&quot;);</span><br><span class="line">&#125;</span><br><span class="line">//é€šè¿‡()æ¥è°ƒç”¨æ­¤å‡½æ•°</span><br><span class="line">f2();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//ä¸€ä¸ªå‘½åä¸ºf3çš„å‡½æ•°çš„å‡½æ•°è¡¨è¾¾å¼(è¿™é‡Œçš„å‡½æ•°åå¯ä»¥éšæ„å‘½åï¼Œå¯ä»¥ä¸å¿…å’Œå˜é‡f3é‡å)ï¼Œè¢«èµ‹å€¼ç»™å˜é‡f3:</span><br><span class="line">var f3 = function f3() &#123;</span><br><span class="line">    console.log(&quot;f2&quot;);</span><br><span class="line">&#125;</span><br><span class="line">//é€šè¿‡()æ¥è°ƒç”¨æ­¤å‡½æ•°</span><br><span class="line">f3();</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢æ‰€èµ·çš„ä½œç”¨éƒ½å·®ä¸å¤šï¼Œä½†è¿˜æ˜¯æœ‰ä¸€äº›å·®åˆ«<br>1ã€å‡½æ•°åå’Œå‡½æ•°çš„å˜é‡å­˜åœ¨ç€å·®åˆ«ã€‚å‡½æ•°åä¸èƒ½è¢«æ”¹å˜ï¼Œä½†å‡½æ•°çš„å˜é‡å´èƒ½å¤Ÿè¢«å†åˆ†é…ã€‚å‡½æ•°ååªèƒ½åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨ã€‚å€˜è‹¥åœ¨å‡½æ•°ä½“å¤–ä½¿ç”¨å‡½æ•°åå°†ä¼šå¯¼è‡´é”™è¯¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var y = function x() &#123;&#125;;</span><br><span class="line">alert(x); // throws an erro</span><br></pre></td></tr></table></figure></p><p>2ã€å‡½æ•°å£°æ˜å®šä¹‰çš„å‡½æ•°å¯ä»¥åœ¨å®ƒè¢«å£°æ˜ä¹‹å‰ä½¿ç”¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">foo(); // alerts FOO!</span><br><span class="line">function foo() &#123;</span><br><span class="line">   alert(&apos;FOO!&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä½†å‡½æ•°å£°æ˜éå¸¸å®¹æ˜“ï¼ˆç»å¸¸æ˜¯æ„å¤–åœ°ï¼‰è½¬æ¢ä¸ºå‡½æ•°è¡¨è¾¾å¼ã€‚å½“å®ƒä¸å†æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜ï¼š</p><p>æˆä¸ºè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†<br>ä¸å†æ˜¯å‡½æ•°æˆ–è€…scriptè‡ªèº«çš„â€œæºå…ƒç´ â€ ï¼ˆsource elementï¼‰ã€‚åœ¨scriptæˆ–è€…å‡½æ•°ä½“å†…â€œæºå…ƒç´ â€å¹¶éæ˜¯å†…åµŒçš„è¯­å¥ï¼ˆstatementï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var x = 0;               // source element</span><br><span class="line">if (x == 0) &#123;            // source element</span><br><span class="line">   x = 10;               // ésource element</span><br><span class="line">   function boo() &#123;&#125;     // é source element</span><br><span class="line">&#125;</span><br><span class="line">function foo() &#123;         // source element</span><br><span class="line">   var y = 20;           // source element</span><br><span class="line">   function bar() &#123;&#125;     // source element</span><br><span class="line">   while (y == 10) &#123;     // source element</span><br><span class="line">      function blah() &#123;&#125; // é source element</span><br><span class="line">      y++;               //ésource element</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Examples:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// å‡½æ•°å£°æ˜</span><br><span class="line">function foo() &#123;&#125;</span><br><span class="line"></span><br><span class="line">// å‡½æ•°è¡¨è¾¾å¼ </span><br><span class="line">(function bar() &#123;&#125;)</span><br><span class="line"></span><br><span class="line">// å‡½æ•°è¡¨è¾¾å¼</span><br><span class="line">x = function hello() &#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if (x) &#123;</span><br><span class="line">   // å‡½æ•°è¡¨è¾¾å¼</span><br><span class="line">   function world() &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// å‡½æ•°å£°æ˜</span><br><span class="line">function a() &#123;</span><br><span class="line">   // å‡½æ•°å£°æ˜</span><br><span class="line">   function b() &#123;&#125;</span><br><span class="line">   if (0) &#123;</span><br><span class="line">      //å‡½æ•°è¡¨è¾¾å¼</span><br><span class="line">      function c() &#123;&#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç°åœ¨æˆ‘ä»¬æ¥è§£é‡Šä¸Šé¢çš„SyntaxError: Unexpected token (ï¼š<br>äº§ç”Ÿè¿™ä¸ªé”™è¯¯çš„åŸå› æ˜¯ï¼ŒJavascriptå¼•æ“çœ‹åˆ°functionå…³é”®å­—ä¹‹åï¼Œè®¤ä¸ºåé¢è·Ÿçš„æ˜¯å‡½æ•°å®šä¹‰è¯­å¥ï¼Œä¸åº”è¯¥ä»¥åœ†æ‹¬å·ç»“å°¾ã€‚<br>è§£å†³æ–¹æ³•å°±æ˜¯è®©å¼•æ“çŸ¥é“ï¼Œåœ†æ‹¬å·å‰é¢çš„éƒ¨åˆ†ä¸æ˜¯å‡½æ•°å®šä¹‰è¯­å¥ï¼Œè€Œæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¯ä»¥å¯¹æ­¤è¿›è¡Œè¿ç®—ã€‚æ‰€ä»¥åº”è¯¥è¿™æ ·å†™ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(function()&#123; /* code */ &#125;()); </span><br><span class="line"></span><br><span class="line">// æˆ–è€…</span><br><span class="line"></span><br><span class="line">(function()&#123; /* code */ &#125;)();</span><br></pre></td></tr></table></figure></p><p>è¿™ä¸¤ç§å†™æ³•éƒ½æ˜¯ä»¥åœ†æ‹¬å·å¼€å¤´ï¼Œå¼•æ“å°±ä¼šè®¤ä¸ºåé¢è·Ÿçš„æ˜¯ä¸€ä¸ªè¡¨ç¤ºå¼ï¼Œè€Œä¸æ˜¯å‡½æ•°å®šä¹‰ï¼Œæ‰€ä»¥å°±é¿å…äº†é”™è¯¯ã€‚è¿™å°±å«åšâ€œç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼â€ï¼ˆImmediately-Invoked Function Expressionï¼‰ï¼Œç®€ç§°IIFEã€‚</p><p>æ³¨æ„ï¼Œä¸Šé¢çš„ä¸¤ç§å†™æ³•çš„ç»“å°¾ï¼Œéƒ½å¿…é¡»åŠ ä¸Šåˆ†å·ã€‚<br>æ¨è€Œå¹¿ä¹‹ï¼Œä»»ä½•è®©è§£é‡Šå™¨ä»¥è¡¨è¾¾å¼æ¥å¤„ç†å‡½æ•°å®šä¹‰çš„æ–¹æ³•ï¼Œéƒ½èƒ½äº§ç”ŸåŒæ ·çš„æ•ˆæœï¼Œæ¯”å¦‚ä¸‹é¢ä¸‰ç§å†™æ³•ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var i = function()&#123; return 10; &#125;();</span><br><span class="line"></span><br><span class="line">true &amp;&amp; function()&#123; /* code */ &#125;();</span><br><span class="line"></span><br><span class="line">0, function()&#123; /* code */ &#125;();</span><br></pre></td></tr></table></figure></p><p>ç”šè‡³åƒè¿™æ ·å†™ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">!function()&#123; /* code */ &#125;();</span><br><span class="line"></span><br><span class="line">~function()&#123; /* code */ &#125;();</span><br><span class="line"></span><br><span class="line">-function()&#123; /* code */ &#125;();</span><br><span class="line"></span><br><span class="line">+function()&#123; /* code */ &#125;();</span><br></pre></td></tr></table></figure></p><p>newå…³é”®å­—ä¹Ÿèƒ½è¾¾åˆ°è¿™ä¸ªæ•ˆæœï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">new function()&#123; /* code */ &#125;</span><br><span class="line"></span><br><span class="line">new function()&#123; /* code */ &#125;() // åªæœ‰ä¼ é€’å‚æ•°æ—¶ï¼Œæ‰éœ€è¦æœ€åé‚£ä¸ªåœ†æ‹¬å·ã€‚</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨<br>é‚£æˆ‘ä»¬é€šå¸¸ä¸ºä»€ä¹ˆä½¿ç”¨å‡½æ•°ç«‹å³è¡¨è¾¾å¼å‘¢ï¼Œä»¥åŠæˆ‘å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œåªå¯¹åŒ¿åå‡½æ•°ä½¿ç”¨è¿™ç§â€œç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼â€ã€‚å®ƒçš„ç›®çš„æœ‰ä¸¤ä¸ªï¼š</p><p>ä¸€æ˜¯ä¸å¿…ä¸ºå‡½æ•°å‘½åï¼Œé¿å…äº†æ±¡æŸ“å…¨å±€å˜é‡ï¼›<br>äºŒæ˜¯IIFEå†…éƒ¨å½¢æˆäº†ä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸï¼Œå¯ä»¥å°è£…ä¸€äº›å¤–éƒ¨æ— æ³•è¯»å–çš„ç§æœ‰å˜é‡ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// å†™æ³•ä¸€</span><br><span class="line">var tmp = newData;</span><br><span class="line">processData(tmp);</span><br><span class="line">storeData(tmp);</span><br><span class="line"></span><br><span class="line">// å†™æ³•äºŒ</span><br><span class="line">(function ()&#123;</span><br><span class="line">  var tmp = newData;</span><br><span class="line">  processData(tmp);</span><br><span class="line">  storeData(tmp);</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå†™æ³•äºŒæ¯”å†™æ³•ä¸€æ›´å¥½ï¼Œå› ä¸ºå®Œå…¨é¿å…äº†æ±¡æŸ“å…¨å±€å˜é‡ã€‚</p><p>æœ€ååœ¨ä¸¾ä¸€ä¸ªçœŸå®çš„æ —å­ï¼šåœ¨JavaScriptçš„OOPä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡IIFEæ¥å®ç°ä¸€ä¸ªå•ä¾‹(å…³äºå•ä¾‹çš„ä¼˜åŒ–ä¸å†æ­¤å¤„è®¨è®º)</p><p>// åˆ›å»ºä¸€ä¸ªç«‹å³è°ƒç”¨çš„åŒ¿åå‡½æ•°è¡¨è¾¾å¼<br>// returnä¸€ä¸ªå˜é‡ï¼Œå…¶ä¸­è¿™ä¸ªå˜é‡é‡ŒåŒ…å«ä½ è¦æš´éœ²çš„ä¸œè¥¿<br>// è¿”å›çš„è¿™ä¸ªå˜é‡å°†èµ‹å€¼ç»™counterï¼Œè€Œä¸æ˜¯å¤–é¢å£°æ˜çš„functionè‡ªèº«<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">var counter = (function () &#123;</span><br><span class="line">    var i = 0;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">        get: function () &#123;</span><br><span class="line">            return i;</span><br><span class="line">        &#125;,</span><br><span class="line">        set: function (val) &#123;</span><br><span class="line">            i = val;</span><br><span class="line">        &#125;,</span><br><span class="line">        increment: function () &#123;</span><br><span class="line">            return ++i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125; ());</span><br><span class="line"></span><br><span class="line">// counteræ˜¯ä¸€ä¸ªå¸¦æœ‰å¤šä¸ªå±æ€§çš„å¯¹è±¡ï¼Œä¸Šé¢çš„ä»£ç å¯¹äºå±æ€§çš„ä½“ç°å…¶å®æ˜¯æ–¹æ³•</span><br><span class="line"></span><br><span class="line">counter.get(); // 0</span><br><span class="line">counter.set(3);</span><br><span class="line">counter.increment(); // 4</span><br><span class="line">counter.increment(); // 5</span><br><span class="line"></span><br><span class="line">counter.i; // undefined å› ä¸ºiä¸æ˜¯è¿”å›å¯¹è±¡çš„å±æ€§</span><br><span class="line">i; // å¼•ç”¨é”™è¯¯: i æ²¡æœ‰å®šä¹‰ï¼ˆå› ä¸ºiåªå­˜åœ¨äºé—­åŒ…ï¼‰</span><br></pre></td></tr></table></figure></p><p>åŸæ–‡åœ°å€ï¼š<a href="https://segmentfault.com/a/1190000003902899" target="_blank" rel="noopener">https://segmentfault.com/a/1190000003902899</a><br>æ–‡ç« è½¬è½½ï¼Œå¦‚æœ‰å†’çŠ¯è¯·è”ç³»ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æ³¨ï¼šæ­¤æ–‡åªåœ¨ç†è§£ç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œä¸åœ¨æ‰€è°“åŸåˆ›ï¼Œæ–‡ä¸­å¤§é‡å¼•ç”¨&lt;a href=&quot;http://javascript.ruanyifeng.com/grammar/function.html#toc23&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;é˜®ä¸€å³°çš„Jav
      
    
    </summary>
    
      <category term="JavaScript" scheme="http://junhey.com/categories/JavaScript/"/>
    
    
      <category term="javascript" scheme="http://junhey.com/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>remå¸ƒå±€</title>
    <link href="http://junhey.com/2016/11/23/2016-11-24-04-16.html"/>
    <id>http://junhey.com/2016/11/23/2016-11-24-04-16.html</id>
    <published>2016-11-23T20:16:00.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<h1 id="rem"><a href="#rem" class="headerlink" title="rem"></a>rem</h1><p>rem(font size of the root element)æ˜¯æŒ‡ç›¸å¯¹äºæ ¹å…ƒç´ çš„å­—ä½“å¤§å°çš„å•ä½</p><h1 id="remå¸ƒå±€ä¸»è¦æœ‰ä¸¤ç§å½¢å¼"><a href="#remå¸ƒå±€ä¸»è¦æœ‰ä¸¤ç§å½¢å¼" class="headerlink" title="remå¸ƒå±€ä¸»è¦æœ‰ä¸¤ç§å½¢å¼"></a>remå¸ƒå±€ä¸»è¦æœ‰ä¸¤ç§å½¢å¼</h1><ul><li><p>cssåª’ä½“æŸ¥è¯¢ è®¾ç½®å¥½font-size</p></li><li><p>jsåŠ¨æ€è®¡ç®—font-size</p></li></ul><h1 id="viewportè®¾ç½®"><a href="#viewportè®¾ç½®" class="headerlink" title="viewportè®¾ç½®"></a>viewportè®¾ç½®</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1,maximum-scale=1, minimum-scale=1&quot;&gt;</span><br></pre></td></tr></table></figure><h1 id="rem-åˆå§‹åŒ–"><a href="#rem-åˆå§‹åŒ–" class="headerlink" title="rem åˆå§‹åŒ–"></a>rem åˆå§‹åŒ–</h1><blockquote><p>copy from taobao</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    !function (win) &#123;</span><br><span class="line">        function refreshRem() &#123;</span><br><span class="line">            var width = docEl.getBoundingClientRect().width;</span><br><span class="line">            width / dpr &gt; 540 &amp;&amp; (width = 540 * dpr), win.rem = width / 16, docEl.style.fontSize = win.rem + &quot;px&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        var dpr, scale, tid, doc = win.document, docEl = doc.documentElement, metaEl = doc.querySelector(&apos;meta[name=&quot;viewport&quot;]&apos;), flexibleEl = doc.querySelector(&apos;meta[name=&quot;flexible&quot;]&apos;);</span><br><span class="line">        if (metaEl) &#123;</span><br><span class="line">            var match = metaEl.getAttribute(&quot;content&quot;).match(/initial\-scale=([&quot;&apos;]?)([\d\.]+)\1?/);</span><br><span class="line">            match &amp;&amp; (scale = parseFloat(match[2]), dpr = parseInt(1 / scale))</span><br><span class="line">        &#125; else if (flexibleEl) &#123;</span><br><span class="line">            var match2 = flexibleEl.getAttribute(&quot;content&quot;).match(/initial\-dpr=([&quot;&apos;]?)([\d\.]+)\1?/);</span><br><span class="line">            match2 &amp;&amp; (dpr = parseFloat(match2[2]), scale = parseFloat((1 / dpr).toFixed(2)))</span><br><span class="line">        &#125;</span><br><span class="line">        if (!dpr &amp;&amp; !scale) &#123;</span><br><span class="line">            var k = (win.navigator.appVersion.match(/android/gi), win.navigator.appVersion.match(/iphone/gi)), devicePixelRatio = win.devicePixelRatio;</span><br><span class="line">            dpr = k ? devicePixelRatio &gt;= 3 ? 3 : devicePixelRatio &gt;= 2 ? 2 : 1 : 1, scale = 1 / dpr</span><br><span class="line">        &#125;</span><br><span class="line">        if (docEl.setAttribute(&quot;data-dpr&quot;, dpr), !metaEl)if (metaEl = doc.createElement(&quot;meta&quot;), metaEl.setAttribute(&quot;name&quot;, &quot;viewport&quot;), metaEl.setAttribute(&quot;content&quot;, &quot;initial-scale=&quot; + scale + &quot;, maximum-scale=&quot; + scale + &quot;, minimum-scale=&quot; + scale + &quot;, user-scalable=no&quot;), docEl.firstElementChild) &#123;</span><br><span class="line">            docEl.firstElementChild.appendChild(metaEl);</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            var l = doc.createElement(&quot;div&quot;);</span><br><span class="line">            l.appendChild(metaEl), doc.write(l.innerHTML)</span><br><span class="line">        &#125;</span><br><span class="line">        win.dpr = dpr, win.addEventListener(&quot;resize&quot;, function () &#123;</span><br><span class="line">            clearTimeout(tid), tid = setTimeout(refreshRem, 300)</span><br><span class="line">        &#125;, !1), win.addEventListener(&quot;pageshow&quot;, function (e) &#123;</span><br><span class="line">            e.persisted &amp;&amp; (clearTimeout(tid), tid = setTimeout(refreshRem, 300))</span><br><span class="line">        &#125;, !1), &quot;complete&quot; === doc.readyState ? doc.body.style.fontSize = 12 * dpr + &quot;px&quot; : doc.addEventListener(&quot;DOMContentLoaded&quot;, function () &#123;</span><br><span class="line">            doc.body.style.fontSize = 12 * dpr + &quot;px&quot;</span><br><span class="line">        &#125;, !1), refreshRem()</span><br><span class="line">    &#125;(window);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;rem&quot;&gt;&lt;a href=&quot;#rem&quot; class=&quot;headerlink&quot; title=&quot;rem&quot;&gt;&lt;/a&gt;rem&lt;/h1&gt;&lt;p&gt;rem(font size of the root element)æ˜¯æŒ‡ç›¸å¯¹äºæ ¹å…ƒç´ çš„å­—ä½“å¤§å°çš„å•ä½&lt;/p&gt;
&lt;h1 id=&quot;rem
      
    
    </summary>
    
      <category term="JavaScript" scheme="http://junhey.com/categories/JavaScript/"/>
    
    
      <category term="html5" scheme="http://junhey.com/tags/html5/"/>
    
  </entry>
  
  <entry>
    <title>macä¸Šç”¨çš„æ¯”è¾ƒå¤šçš„å¿«æ·é”®ï¼ˆå¸¸æ›´æ–°ï¼‰</title>
    <link href="http://junhey.com/2016/11/09/2016-11-10-03-55.html"/>
    <id>http://junhey.com/2016/11/09/2016-11-10-03-55.html</id>
    <published>2016-11-09T19:55:00.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<p>Mac OS X èœå•ä¸­çš„ä¿®é¥°é”®ç¬¦å·</p><p>Command é”®å›¾æ ‡ï¼ˆCommand é”®ï¼‰ - åœ¨æŸäº› Apple é”®ç›˜ä¸Šï¼Œæ­¤é”®ä¹Ÿå¯èƒ½å¸¦æœ‰ Apple æ ‡å¿—ï¼ˆapple æ ‡å¿—ï¼‰<br>Control é”®å›¾æ ‡ï¼ˆControl é”®ï¼‰<br>Option æˆ– Alt é”®å›¾æ ‡ï¼ˆOption é”®ï¼‰-â€œAltâ€å¯èƒ½ä¹Ÿå‡ºç°åœ¨æ­¤é”®ä¸Š<br>Shift é”®å›¾æ ‡ï¼ˆShift é”®ï¼‰<br>Caps lock é”®å›¾æ ‡ï¼ˆCaps Lock é”®ï¼‰- åˆ‡æ¢å¤§å†™å­—æ¯é”å®šå¼€æˆ–å…³<br>fnï¼ˆåŠŸèƒ½é”®ï¼‰ </p><p><img src="http://junhey.com/usr/uploads/2017/01/630794881.png" alt="macå¿«æ·é”®.png"></p><p>control+command+f å…¨å±çš„å¿«æ·é”®</p><p>command+option+i  å¼€å‘è€…æ¨¡å¼</p><p>Command+W å…³åˆ†é¡µ</p><p>Command+R åˆ·æ–°</p><p>Command+T  æ–°å¼€åˆ†é¡µ</p><p>shift+Command+3å…¨å±å’Œ+4å±€éƒ¨  æˆªå±é”®</p><p>finder =&gt;command + option + æ‹–æ‹½åˆ°æ¡Œé¢ä¸Š  æ¡Œé¢å¿«æ·æ–¹å¼</p><p>command +f3 å›åˆ°æ¡Œé¢åˆ‡æ¢(éå…¨å±æ¨¡å¼ä¸‹)</p><p>command+control+f ç¨‹åºå…¨å±åˆ‡æ¢</p><p>command+tab ç¨‹åºåˆ‡æ¢</p><p>cmd+câ†’cmd+v å¤åˆ¶ç²˜è´´</p><p>cmd+câ†’cmd+option+v å‰ªåˆ‡ç²˜è´´</p><p>command+q å®Œå…¨é€€å‡ºç¨‹åº</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Mac OS X èœå•ä¸­çš„ä¿®é¥°é”®ç¬¦å·&lt;/p&gt;
&lt;p&gt;Command é”®å›¾æ ‡ï¼ˆCommand é”®ï¼‰ - åœ¨æŸäº› Apple é”®ç›˜ä¸Šï¼Œæ­¤é”®ä¹Ÿå¯èƒ½å¸¦æœ‰ Apple æ ‡å¿—ï¼ˆapple æ ‡å¿—ï¼‰&lt;br&gt;Control é”®å›¾æ ‡ï¼ˆControl é”®ï¼‰&lt;br&gt;Option æˆ– Alt é”®å›¾æ ‡
      
    
    </summary>
    
      <category term="JavaScript" scheme="http://junhey.com/categories/JavaScript/"/>
    
    
      <category term="mac" scheme="http://junhey.com/tags/mac/"/>
    
  </entry>
  
  <entry>
    <title>Macä¸‹å®‰è£…nginx</title>
    <link href="http://junhey.com/2016/11/07/2016-11-07-08-36.html"/>
    <id>http://junhey.com/2016/11/07/2016-11-07-08-36.html</id>
    <published>2016-11-07T00:36:58.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Macå®‰è£…nginx"><a href="#Macå®‰è£…nginx" class="headerlink" title="Macå®‰è£…nginx"></a>Macå®‰è£…nginx</h1><h2 id="å®‰è£…brew-ç”±äºMACè‡ªå¸¦rubyï¼Œæ‰€ä»¥å®‰è£…èµ·æ¥å¾ˆæ–¹ä¾¿"><a href="#å®‰è£…brew-ç”±äºMACè‡ªå¸¦rubyï¼Œæ‰€ä»¥å®‰è£…èµ·æ¥å¾ˆæ–¹ä¾¿" class="headerlink" title="å®‰è£…brew(ç”±äºMACè‡ªå¸¦rubyï¼Œæ‰€ä»¥å®‰è£…èµ·æ¥å¾ˆæ–¹ä¾¿)"></a>å®‰è£…brew(ç”±äºMACè‡ªå¸¦rubyï¼Œæ‰€ä»¥å®‰è£…èµ·æ¥å¾ˆæ–¹ä¾¿)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</span><br></pre></td></tr></table></figure><p>å®‰è£…åå‘½ä»¤å­˜åœ¨ /usr/local/bin/brew</p><h2 id="brewå®‰è£…nginx"><a href="#brewå®‰è£…nginx" class="headerlink" title="brewå®‰è£…nginx"></a>brewå®‰è£…nginx</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install nginx   ï¼ˆæˆ–è€… /usr/local/bin/brew install nginxï¼‰</span><br></pre></td></tr></table></figure><p>è¿‡åç­‰ç€å°±è¡Œäº†ã€‚ä¼šè‡ªåŠ¨å®‰è£…pcreå’Œsslç­‰ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Macå®‰è£…nginx&quot;&gt;&lt;a href=&quot;#Macå®‰è£…nginx&quot; class=&quot;headerlink&quot; title=&quot;Macå®‰è£…nginx&quot;&gt;&lt;/a&gt;Macå®‰è£…nginx&lt;/h1&gt;&lt;h2 id=&quot;å®‰è£…brew-ç”±äºMACè‡ªå¸¦rubyï¼Œæ‰€ä»¥å®‰è£…èµ·æ¥å¾ˆæ–¹ä¾¿&quot;&gt;&lt;a 
      
    
    </summary>
    
      <category term="JavaScript" scheme="http://junhey.com/categories/JavaScript/"/>
    
    
      <category term="mac" scheme="http://junhey.com/tags/mac/"/>
    
  </entry>
  
  <entry>
    <title>Macä¸ŠNginxé…ç½®</title>
    <link href="http://junhey.com/2016/11/02/2016-11-02-11-16.html"/>
    <id>http://junhey.com/2016/11/02/2016-11-02-11-16.html</id>
    <published>2016-11-02T03:16:00.000Z</published>
    <updated>2023-08-22T04:11:10.879Z</updated>
    
    <content type="html"><![CDATA[<p>èƒŒæ™¯</p><p>ä¹‹å‰ä¸€ç›´ä½¿ç”¨Apacheåšé™æ€èµ„æºç§æœåŠåå‘ä»£ç†, é…ç½®ç¨æ˜¾å¤æ‚, ä»Šå¤©ä½¿ç”¨nginxæ¥æ›¿æ¢Apache, åœ¨æ­¤å°è®°ä¸€ä¸‹æ¢ç´¢çš„è¿‡ç¨‹åŠç¢°åˆ°çš„é—®é¢˜.</p><p>å®‰è£…</p><p>æœ¬äººä½¿ç”¨Macç³»ç»Ÿ, å·æ‡’çš„ä½¿ç”¨äº†homebrew, ä¸€é”®å®Œæˆäº†å®‰è£…. å¯¹äºå…¶å®ƒOSä½¿ç”¨è§£å‹zipçš„æ–¹å¼.</p><p>ä¸‹é¢ä»å®‰è£…â€“&gt;é…ç½®(é™æ€èµ„æºç§æœ php åå‘ä»£ç†)â€“&gt;é—®é¢˜å±•å¼€å§</p><p>å®‰è£…Homebrew</p><p>ruby -e â€œ$(curl -fsSL <a href="https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;" target="_blank" rel="noopener">https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</a></p><p>brew cleanup</p><p>brew doctor<br>å®‰è£…Nginx</p><p>å®‰è£…</p><p>brew install nginx<br>å¯åŠ¨</p><p>sudo nginx<br>åœæ­¢</p><p>sudo nginx -s stop<br>é…ç½®</p><p>æ–‡ä»¶ç›®å½•</p><p>nginxå®‰è£…æ–‡ä»¶ç›®å½•</p><p>/usr/local/Cellar/nginx<br>nginxé…ç½®æ–‡ä»¶ç›®å½•</p><p>/usr/local/etc/nginx<br>ç³»ç»Ÿhostsä½ç½®</p><p>/private/etc/hosts<br>é…ç½®nginx</p><p>ä½¿ç”¨å¤šä¸ªé…ç½®æ¥ç®¡ç†nginxä¸‹çš„å¤šä¸ªwebsites</p><p>cd /usr/local/etc/nginx</p><p>mkdir conf.d</p><p>vim /usr/local/etc/nginx/nginx.conf<br>åœ¨nginx.confä¸­è¿›è¡Œä¿®æ”¹, å¤§è‡´é…ç½®å¯å¦‚ä¸‹, è¯¦ç»†é…ç½®è§å®˜æ–¹æ–‡æ¡£</p><p>user  your_username staff;<br>worker_processes  1;</p><p>events {<br>    worker_connections  1024;<br>}</p><p>http {<br>    include       mime.types;<br>    default_type  application/octet-stream;<br>    sendfile        on;<br>    keepalive_timeout  65;<br>    include conf.d/*.conf;<br>}<br>æ³¨æ„ä¿®æ”¹è¯¥é…ç½®ä¸­çš„your_usernameä¸ºä½ çš„Macç”¨æˆ·å.</p><p>åˆ°æ­¤çˆ¶çº§é…ç½®å·²é…ç½®å®Œæˆ, æ¥ä¸‹æ¥é…ç½®ç”¨æˆ·å¸Œæœ›çš„åŠŸèƒ½, ä¾‹å¦‚é™æ€èµ„æºç§æœæˆ–åå‘ä»£ç†.</p><p>é…ç½®è‡ªå·±çš„é™æ€èµ„æºæœåŠ¡å™¨(username.conf), å¦‚ä¸‹</p><p>server {<br>        listen       80;<br>        server_name  resource.com;<br>        charset utf-8,gbk;<br>        location / {<br>            root   /Users/username/resource;</p><pre><code>    #index  index.html index.htm;    autoindex on;    autoindex_exact_size on;    autoindex_localtime on;}</code></pre><p>}<br>é…ç½®åå‘ä»£ç†, å¦‚ä¸‹</p><p>server {<br>    listen       80;<br>    server_name  app.com;</p><pre><code># oauth2çš„èµ„æºæœåŠ¡å™¨location / {    proxy_set_header        Host $http_host;    proxy_pass http://localhost:8080/resource-app/;}location /resource-app/ {    proxy_set_header        Host $http_host;    proxy_pass http://localhost:8080/resource-app/;}# oauth2çš„æˆæƒæœåŠ¡å™¨    location /actor-app/ {    proxy_set_header        Host $http_host;    proxy_pass http://localhost:8082/actor-app/;}</code></pre><p>}<br>é…ç½®Php</p><p>å®‰è£…php-fpm</p><p>Mac OSX 10.9çš„ç³»ç»Ÿè‡ªå¸¦äº†PHPã€php-fpmï¼Œçœå»äº†å®‰è£…php-fpmçš„éº»çƒ¦ã€‚ è¿™é‡Œéœ€è¦ç®€å•åœ°ä¿®æ”¹ä¸‹php-fpmçš„é…ç½®ï¼Œå¦åˆ™è¿è¡Œphp-fpmä¼šæŠ¥é”™ã€‚</p><p>sudo cp /private/etc/php-fpm.conf.default /private/etc/php-fpm.conf<br>vim /private/etc/php-fpm.conf<br>ä¿®æ”¹php-fpm.confæ–‡ä»¶ä¸­çš„error_logé¡¹ï¼Œé»˜è®¤è¯¥é¡¹è¢«æ³¨é‡Šæ‰ï¼Œè¿™é‡Œéœ€è¦å»æ³¨é‡Šå¹¶ä¸”ä¿®æ”¹ä¸ºerror_log = /usr/local/var/log/php-fpm.logã€‚å¦‚æœä¸ä¿®æ”¹è¯¥å€¼ï¼Œè¿è¡Œphp-fpmçš„æ—¶å€™ä¼šæç¤ºlogæ–‡ä»¶è¾“å‡ºè·¯å¾„ä¸å­˜åœ¨çš„é”™è¯¯ã€‚</p><p>é…ç½®hosts</p><p>vim /private/etc/hosts<br>åœ¨æœ«å°¾åŠ å…¥å¦‚ä¸‹ä»£ç , è¯¥åŸŸåæ˜¯nginxä¸­serveræŒ‡å®šçš„server_name</p><h1 id="é’ˆå¯¹é™æ€èµ„æºç§æœ"><a href="#é’ˆå¯¹é™æ€èµ„æºç§æœ" class="headerlink" title="é’ˆå¯¹é™æ€èµ„æºç§æœ"></a>é’ˆå¯¹é™æ€èµ„æºç§æœ</h1><p>127.0.0.1 resource.com</p><h1 id="é’ˆå¯¹åå‘ä»£ç†"><a href="#é’ˆå¯¹åå‘ä»£ç†" class="headerlink" title="é’ˆå¯¹åå‘ä»£ç†"></a>é’ˆå¯¹åå‘ä»£ç†</h1><p>127.0.0.1 app.com<br>é…ç½®å®Œæ¯•, åœ¨æµè§ˆå™¨ä¸­é”®å…¥<a href="http://resource.com/å¯ä»¥å¯¹æŒ‡å®šç›®å½•çš„æ–‡ä»¶è¿›è¡Œæµè§ˆ,ä¸‹è½½" target="_blank" rel="noopener">http://resource.com/å¯ä»¥å¯¹æŒ‡å®šç›®å½•çš„æ–‡ä»¶è¿›è¡Œæµè§ˆ,ä¸‹è½½</a>; é”®å…¥<a href="http://app.com/resource-appæˆ–http://app.com/actor-appå¯åˆ†åˆ«è¿›å…¥ä¸åŒçš„åº”ç”¨" target="_blank" rel="noopener">http://app.com/resource-appæˆ–http://app.com/actor-appå¯åˆ†åˆ«è¿›å…¥ä¸åŒçš„åº”ç”¨</a>.</p><p>æµ‹è¯•</p><p>åœ¨rootæ ¹ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶index.php, å†…å®¹å¦‚ä¸‹,</p><p>&lt;?php phpinfo(); ?&gt;<br>å¯åŠ¨nginx</p><p>sudo nginx<br>é‡å¯nginx</p><p>sudo nginx -s reload<br>åœæ­¢nginx</p><p>sudo nginx -s stop<br>å¯åŠ¨php</p><p>sudo php-fpm<br>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥<a href="http://resource.com/index.phpå³å¯çœ‹åˆ°phpçš„è¯¦ç»†ä¿¡æ¯" target="_blank" rel="noopener">http://resource.com/index.phpå³å¯çœ‹åˆ°phpçš„è¯¦ç»†ä¿¡æ¯</a>.</p><p>é—®é¢˜</p><p>1.é”®å…¥<a href="http://resource.com/" target="_blank" rel="noopener">http://resource.com/</a>, æœåŠ¡å™¨è¿”å›403ç•Œé¢</p><p>è¯¥é—®é¢˜æ˜¯å› ä¸ºè®¿é—®æƒé™ä¸å¤Ÿé€ æˆ, åœ¨nginx.confé¦–è¡Œé…ç½®å³å¯,</p><p>user  your_username staff;</p><p>2.ç›®å½•æœªæ˜¾ç¤º, åªæ˜¾ç¤ºindex.htmlé¡µé¢</p><p>è¯¥é—®é¢˜æ˜¯æŒ‡å®šç«™ç‚¹(website)æœªå¯ç”¨ç›®å½•æµè§ˆåŠŸèƒ½, åœ¨æŒ‡å®šserverçš„locationèŠ‚ç‚¹å¯ç”¨ç›®å½•æµè§ˆåŠŸèƒ½,å¦‚ä¸‹,</p><p>autoindex on;<br>autoindex_exact_size<br>autoindex_localtime on;</p><p>æ¥è‡ªï¼š<a href="http://arccode.net/2015/02/27/Nginx%E9%85%8D%E7%BD%AE%E5%B0%8F%E8%AE%B0/" target="_blank" rel="noopener">http://arccode.net/2015/02/27/Nginx%E9%85%8D%E7%BD%AE%E5%B0%8F%E8%AE%B0/</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;èƒŒæ™¯&lt;/p&gt;
&lt;p&gt;ä¹‹å‰ä¸€ç›´ä½¿ç”¨Apacheåšé™æ€èµ„æºç§æœåŠåå‘ä»£ç†, é…ç½®ç¨æ˜¾å¤æ‚, ä»Šå¤©ä½¿ç”¨nginxæ¥æ›¿æ¢Apache, åœ¨æ­¤å°è®°ä¸€ä¸‹æ¢ç´¢çš„è¿‡ç¨‹åŠç¢°åˆ°çš„é—®é¢˜.&lt;/p&gt;
&lt;p&gt;å®‰è£…&lt;/p&gt;
&lt;p&gt;æœ¬äººä½¿ç”¨Macç³»ç»Ÿ, å·æ‡’çš„ä½¿ç”¨äº†homebrew, ä¸€é”®å®Œæˆäº†å®‰è£…. å¯¹
      
    
    </summary>
    
      <category term="server" scheme="http://junhey.com/categories/server/"/>
    
    
      <category term="mac" scheme="http://junhey.com/tags/mac/"/>
    
      <category term="nginx" scheme="http://junhey.com/tags/nginx/"/>
    
  </entry>
  
</feed>
